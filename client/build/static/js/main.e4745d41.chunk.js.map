{"version":3,"sources":["components/Signup.js","components/Login.js","components/PrivateRoute.js","components/ForgotPassword.js","components/UpdateProfile.js","components/App.js","index.js","firebase.js","contexts/AuthContext.js","functions/HelperFunctions.js","components/Dashboard.js","components/RemarkModal.js"],"names":["Signup","emailRef","useRef","passwordRef","passwordConfirmRef","signup","useAuth","useState","error","setError","loading","setLoading","history","useHistory","e","a","preventDefault","current","value","push","Container","className","style","minHeight","maxWidth","Card","Body","Alert","variant","Form","onSubmit","Group","id","Label","Control","type","ref","required","Button","disabled","to","Login","login","PrivateRoute","Component","component","rest","currentUser","render","props","ForgotPassword","resetPassword","message","setMessage","UpdateProfile","updateEmail","updatePassword","promises","email","Promise","all","then","catch","finally","defaultValue","placeholder","App","exact","path","Dashboard","ReactDOM","document","getElementById","app","firebase","initializeApp","apiKey","process","authDomain","REACT_APP_FIREBASE_AUTH_DOMAI","projectId","storageBucket","messagingSenderId","appId","auth","AuthContext","React","createContext","useContext","AuthProvider","children","setCurrentUser","useEffect","onAuthStateChanged","user","password","signInWithEmailAndPassword","createUserWithEmailAndPassword","logout","signOut","sendPasswordResetEmail","Provider","baseURL","savedReceivedDocAPI","queriedJobFolder","subFolder","fileArray","queriedSubFolder","queriedChildrenList","createdUploadFolder","pageToken","axios","post","q","fields","response","data","spaces","latestFile","sortedChildrenList","files","sort","b","name","length","toString","moment","format","toLocaleString","date","Number","substring","fileNumber","parents","mimeType","i","formData","FormData","append","headers","status","savedIssuedDocIssuedAPI","savedIssuedDocCurrentAPI","supersededFolder","supersededFiles","outdatedFiles","forEach","existingFile","existing_revision_index","lastIndexOf","existing_base_name","substr","new_revision_index","existing_revision","new_revision","existing_decimal_index","new_decimal_index","isNaN","existing_revision_number","existing_revision_letter","charCodeAt","j","includes","cleanXlsxAPI","fileNameArray","existingFileName","options","setOptions","jobs","encodedAuth","Buffer","from","Array","fill","map","v","fetch","res","json","obj","projectNumber","projectName","projectOffice","indexOf","saveReceivedDocInput","saveIssuedDocInput","readXlsxFile","setQueriedJobFolder","getJobID","myQueriedJobFolder","setShowFileUploadSuccess","setFileUploadError","setShowFileUploadError","fileUploadError","showFileUploadError","showFileUploadSuccess","remarkData","setRemarkData","saveReceivedDoc","fileArrayFunc","handleShowRemarkModal","saveIssuedDoc","xlsxItems","cleanXlsx","xlsxFile","readExcel","getFileList","file","promise","resolve","reject","fileReader","FileReader","readAsArrayBuffer","onload","bufferArray","target","result","wb","XLSX","wsname","SheetNames","ws","Sheets","sheet_to_json","onerror","d","sheetItems","xlsxFileList","objectArray","Object","values","xlsxFileName","jobNumberRef","typeAheadValue","setTypeAheadValue","receivedSubFolder","setReceivedSubFolder","issuedFiles","onButtonClickReceived","click","showRemarkModal","setShowRemarkModal","selected","setSelected","show","onHide","remarkdata","minWidth","Brand","alt","src","Link","href","backgroundColor","color","onClick","height","width","display","justifyContent","alignItems","flexDirection","size","fluid","xs","borderRadius","borderColor","borderBottomLeftRadius","borderBottomRightRadius","onChange","onInputChange","input","accept","multiple","RemarkModal","fileID","originalName","Remark","this","renameID","remark","fileId","backdrop","keyboard","Header","Title","handleSubmit","Footer"],"mappings":"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","file":"static/js/main.e4745d41.chunk.js","sourcesContent":["import React, { useRef, useState } from 'react'\r\nimport { Card, Form, Button, Alert, Container } from 'react-bootstrap'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { Link, useHistory } from 'react-router-dom'\r\n\r\nexport default function Signup() {\r\n    const emailRef = useRef()\r\n    const passwordRef = useRef()\r\n    const passwordConfirmRef = useRef()\r\n    const { signup } = useAuth()\r\n    const [error, setError] = useState('')\r\n    const [loading, setLoading] = useState(false)\r\n    const history = useHistory()\r\n\r\n    async function handleSubmit(e) {\r\n        e.preventDefault()\r\n\r\n        if (passwordRef.current.value !== passwordConfirmRef.current.value) {\r\n            return setError('Passwords do not match')\r\n        }\r\n\r\n        try {\r\n            setError('')\r\n            setLoading(true)\r\n            await signup(emailRef.current.value, passwordRef.current.value)\r\n            history.push(\"/\")\r\n        } catch {\r\n            setError('Failed to create an account')\r\n        }\r\n\r\n        setLoading(false)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Container className=\"d-flex align-items-center justify-content-center\" style={{ minHeight: \"100vh\" }}>\r\n                <div className=\"w100\" style={{ maxWidth: \"400px\" }}>\r\n                    <Card>\r\n                        <Card.Body>\r\n                            <h2 className=\"text-center mb-4\">Add New User</h2>\r\n                            {error && <Alert variant=\"danger\">{error}</Alert>}\r\n                            <Form onSubmit={handleSubmit}>\r\n                                <Form.Group id=\"email\">\r\n                                    <Form.Label>Email</Form.Label>\r\n                                    <Form.Control type=\"email\" ref={emailRef} required />\r\n                                </Form.Group>\r\n                                <Form.Group id=\"password\">\r\n                                    <Form.Label>Password</Form.Label>\r\n                                    <Form.Control type=\"password\" ref={passwordRef} required />\r\n                                </Form.Group>\r\n                                <Form.Group id=\"password-confirm\">\r\n                                    <Form.Label>Password Confirmation</Form.Label>\r\n                                    <Form.Control type=\"password\" ref={passwordConfirmRef} required />\r\n                                </Form.Group>\r\n                                <Button disabled={loading} className=\"w-100 mt-4\" type=\"submit\">Add New User</Button>\r\n                            </Form>\r\n                        </Card.Body>\r\n                    </Card>\r\n                    <div className=\"w-100 text-center mt-2\">\r\n                        <Link to=\"/\">Cancel</Link>\r\n                    </div>\r\n                </div>\r\n            </Container>\r\n        </>\r\n    )\r\n}","import React, { useRef, useState } from 'react'\r\nimport { Card, Form, Button, Alert, Container } from 'react-bootstrap'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { Link, useHistory } from 'react-router-dom'\r\n\r\nexport default function Login() {\r\n    const emailRef = useRef()\r\n    const passwordRef = useRef()\r\n    const { login } = useAuth()\r\n    const [error, setError] = useState('')\r\n    const [loading, setLoading] = useState(false)\r\n    const history = useHistory()\r\n\r\n    async function handleSubmit(e) {\r\n        e.preventDefault()\r\n\r\n        try {\r\n            setError('')\r\n            setLoading(true)\r\n            await login(emailRef.current.value, passwordRef.current.value)\r\n            history.push('/')\r\n        } catch {\r\n            setError('Failed to log in')\r\n        }\r\n\r\n        setLoading(false)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Container className=\"d-flex align-items-center justify-content-center\" style={{ minHeight: \"100vh\" }}>\r\n                <div className=\"w100\" style={{ maxWidth: \"400px\" }}>\r\n                    <Card>\r\n                        <Card.Body>\r\n                            <h2 className=\"text-center mb-4\">Log In</h2>\r\n                            {error && <Alert variant=\"danger\">{error}</Alert>}\r\n                            <Form onSubmit={handleSubmit}>\r\n                                <Form.Group id=\"email\">\r\n                                    <Form.Label>Email</Form.Label>\r\n                                    <Form.Control type=\"email\" ref={emailRef} required />\r\n                                </Form.Group>\r\n                                <Form.Group id=\"password\">\r\n                                    <Form.Label>Password</Form.Label>\r\n                                    <Form.Control type=\"password\" ref={passwordRef} required />\r\n                                </Form.Group>\r\n                                <Button disabled={loading} className=\"w-100 mt-4\" type=\"submit\">Log In</Button>\r\n                            </Form>\r\n                            <div className=\"w-100 text-center mt-3\">\r\n                                <Link to=\"/forgot-password\">Forgot Password?</Link>\r\n                            </div>\r\n                        </Card.Body>\r\n                    </Card>\r\n                    {/* <div className=\"w-100 text-center mt-2\">\r\n                        Need an account? <Link to=\"/signup\">Sign Up</Link>\r\n                    </div> */}\r\n                </div>\r\n            </Container>\r\n        </>\r\n    )\r\n}","import React from 'react'\r\nimport { Redirect, Route } from 'react-router-dom'\r\nimport { useAuth } from '../contexts/AuthContext'\r\n\r\nexport default function PrivateRoute({ component: Component, ...rest }) {\r\n    const { currentUser } = useAuth()\r\n\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={props => {\r\n                return currentUser ? <Component {...props } /> : <Redirect to=\"/login\" />\r\n            }}\r\n        >\r\n        </Route>\r\n    )\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { Card, Form, Button, Alert, Container } from 'react-bootstrap'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function ForgotPassword() {\r\n    const emailRef = useRef()\r\n    const { resetPassword } = useAuth()\r\n    const [error, setError] = useState('')\r\n    const [message, setMessage] = useState('')\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    async function handleSubmit(e) {\r\n        e.preventDefault()\r\n\r\n        try {\r\n            setMessage('')\r\n            setError('')\r\n            setLoading(true)\r\n            await resetPassword(emailRef.current.value)\r\n            setMessage('Check your inbox for further instructions')\r\n        } catch {\r\n            setError('Failed to reset password')\r\n        }\r\n\r\n        setLoading(false)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Container className=\"d-flex align-items-center justify-content-center\" style={{ minHeight: \"100vh\" }}>\r\n                <div className=\"w100\" style={{ maxWidth: \"400px\" }}>\r\n                    <Card>\r\n                        <Card.Body>\r\n                            <h2 className=\"text-center mb-4\">Password Reset</h2>\r\n                            {error && <Alert variant=\"danger\">{error}</Alert>}\r\n                            {message && <Alert variant=\"success\">{message}</Alert>}\r\n                            <Form onSubmit={handleSubmit}>\r\n                                <Form.Group id=\"email\">\r\n                                    <Form.Label>Email</Form.Label>\r\n                                    <Form.Control type=\"email\" ref={emailRef} required />\r\n                                </Form.Group>\r\n                                <Button disabled={loading} className=\"w-100 mt-4\" type=\"submit\">Reset Password</Button>\r\n                            </Form>\r\n                            <div className=\"w-100 text-center mt-3\">\r\n                                <Link to=\"/login\">Login</Link>\r\n                            </div>\r\n                        </Card.Body>\r\n                    </Card>\r\n                    <div className=\"w-100 text-center mt-2\">\r\n                        Need an account? <Link to=\"/signup\">Sign Up</Link>\r\n                    </div>\r\n                </div>\r\n            </Container>\r\n        </>\r\n    )\r\n}","import React, { useRef, useState } from 'react'\r\nimport { Card, Form, Button, Alert, Container } from 'react-bootstrap'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { Link, useHistory } from 'react-router-dom'\r\n\r\nexport default function UpdateProfile() {\r\n    const emailRef = useRef()\r\n    const passwordRef = useRef()\r\n    const passwordConfirmRef = useRef()\r\n    const { currentUser, updateEmail, updatePassword } = useAuth()\r\n    const [error, setError] = useState('')\r\n    const [loading, setLoading] = useState(false)\r\n    const history = useHistory()\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault()\r\n\r\n        if (passwordRef.current.value !== passwordConfirmRef.current.value) {\r\n            return setError('Passwords do not match')\r\n        }\r\n\r\n        const promises = []\r\n\r\n        setError('')\r\n        setLoading(true)\r\n\r\n        if (emailRef.current.value !== currentUser.email) {\r\n            promises.push(updateEmail(emailRef.current.value))\r\n        }\r\n\r\n        if (passwordRef.current.value) {\r\n            promises.push(updatePassword(passwordRef.current.value))\r\n        }\r\n\r\n        Promise.all(promises).then(() => {\r\n            history.push('/')\r\n        }).catch(() => {\r\n            setError('Failed to update account')\r\n        }).finally(() => {\r\n            setLoading(false)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Container className=\"d-flex align-items-center justify-content-center\" style={{ minHeight: \"100vh\" }}>\r\n                <div className=\"w100\" style={{ maxWidth: \"400px\" }}>\r\n                    <Card>\r\n                        <Card.Body>\r\n                            <h2 className=\"text-center mb-4\">Update Profile</h2>\r\n                            {error && <Alert variant=\"danger\">{error}</Alert>}\r\n                            <Form onSubmit={handleSubmit}>\r\n                                <Form.Group id=\"email\">\r\n                                    <Form.Label>Email</Form.Label>\r\n                                    <Form.Control type=\"email\" ref={emailRef} required defaultValue={currentUser.email} />\r\n                                </Form.Group>\r\n                                <Form.Group id=\"password\">\r\n                                    <Form.Label>Password</Form.Label>\r\n                                    <Form.Control type=\"password\" ref={passwordRef} placeholder=\"Leave blank to keep the same\" />\r\n                                </Form.Group>\r\n                                <Form.Group id=\"password-confirm\">\r\n                                    <Form.Label>Password Confirmation</Form.Label>\r\n                                    <Form.Control type=\"password\" ref={passwordConfirmRef} placeholder=\"Leave blank to keep the same\" />\r\n                                </Form.Group>\r\n                                <Button disabled={loading} className=\"w-100 mt-4\" type=\"submit\">Update</Button>\r\n                            </Form>\r\n                        </Card.Body>\r\n                    </Card>\r\n                    <div className=\"w-100 text-center mt-2\">\r\n                        <Link to=\"/\">Cancel</Link>\r\n                    </div>\r\n                </div>\r\n            </Container>\r\n        </>\r\n    )\r\n}","import React from 'react'\r\nimport Signup from './Signup'\r\nimport { AuthProvider } from '../contexts/AuthContext'\r\nimport { BrowserRouter as Router, Switch, Route} from 'react-router-dom'\r\nimport Dashboard from './Dashboard'\r\nimport Login from './Login'\r\nimport PrivateRoute from './PrivateRoute'\r\nimport ForgotPassword from './ForgotPassword'\r\nimport UpdateProfile from './UpdateProfile'\r\n\r\nfunction App() {\r\n  return (\r\n      <div>\r\n        <Router>\r\n          <AuthProvider>\r\n            <Switch>\r\n              <PrivateRoute exact path=\"/\" component={Dashboard}/>\r\n              <PrivateRoute path=\"/update-profile\" component={UpdateProfile}/>\r\n              <PrivateRoute path=\"/signup\" component={Signup} />\r\n              <Route path=\"/login\" component={Login} />\r\n              <Route path=\"/forgot-password\" component={ForgotPassword} />\r\n            </Switch>\r\n          </AuthProvider>\r\n        </Router>\r\n      </div>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/App';\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\n\r\nReactDOM.render(\r\n  // <React.StrictMode>\r\n    <App />\r\n  // </React.StrictMode>\r\n  ,\r\n  document.getElementById('root')\r\n);\r\n","import firebase from 'firebase/app'\r\nimport \"firebase/auth\"\r\n\r\nconst app = firebase.initializeApp({\r\n    apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n    authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAI,\r\n    projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n    storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n    messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n    appId: process.env.REACT_APP_FIREBASE_APP_ID\r\n})\r\n\r\nexport const auth = app.auth()\r\nexport default app","import React, { useContext, useState, useEffect } from 'react'\r\nimport { auth } from '../firebase'\r\n\r\nconst AuthContext = React.createContext()\r\n\r\nexport function useAuth() {\r\n    return useContext(AuthContext)\r\n}\r\n\r\nexport function AuthProvider({ children }) {\r\n    const [currentUser, setCurrentUser] = useState()\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    function signup(email, password) {\r\n        return auth.createUserWithEmailAndPassword(email, password)\r\n    }\r\n\r\n    function login(email, password) {\r\n        return auth.signInWithEmailAndPassword(email, password)\r\n    }\r\n\r\n    function logout() {\r\n        return auth.signOut()\r\n    }\r\n\r\n    function resetPassword(email) {\r\n        return auth.sendPasswordResetEmail(email)\r\n    }\r\n\r\n    function updateEmail(email) {\r\n        return currentUser.updateEmail(email)\r\n    }\r\n\r\n    function updatePassword(password) {\r\n        return currentUser.updatePassword(password)\r\n    }\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = auth.onAuthStateChanged(user => {\r\n            setCurrentUser(user)\r\n            setLoading(false)\r\n        })\r\n\r\n        return unsubscribe\r\n    }, [])\r\n\r\n    auth.onAuthStateChanged(user => {\r\n        setCurrentUser(user)\r\n    })\r\n\r\n    const value = {\r\n        currentUser,\r\n        login,\r\n        signup,\r\n        logout,\r\n        resetPassword,\r\n        updateEmail,\r\n        updatePassword\r\n    }\r\n\r\n    return (\r\n        <AuthContext.Provider value={value}>\r\n            {!loading && children}\r\n        </AuthContext.Provider>\r\n    )\r\n}\r\n","import axios from 'axios'\r\nimport moment from 'moment'\r\n\r\nconst baseURL = \"https://sy-custom-api-web-app.ts.r.appspot.com\";\r\n\r\nexport async function savedReceivedDocAPI(queriedJobFolder, subFolder, fileArray) {\r\n    var queriedSubFolder = null;\r\n    var queriedChildrenList = null;\r\n    var createdUploadFolder = null;\r\n    var pageToken = null;\r\n\r\n    if (subFolder === 'Geotechnical') {\r\n        await axios\r\n            .post(baseURL+'/getFolder', {\r\n                q: \"mimeType='application/vnd.google-apps.folder' and name='Engineering' and '\" + queriedJobFolder[0].id + \"' in parents\",\r\n                fields: 'files(name,id)'\r\n            })\r\n            .then((response) => {\r\n                queriedSubFolder = response.data;\r\n                // console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n            });\r\n\r\n        await axios\r\n            .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='\" + subFolder + \"' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n            })\r\n            .then((response) => {\r\n            queriedSubFolder = response.data;\r\n            //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n            });\r\n    } else {\r\n        await axios\r\n            .post(baseURL+'/getFolder', {\r\n              q: \"mimeType='application/vnd.google-apps.folder' and name='\" + subFolder + \"' and '\" + queriedJobFolder[0].id + \"' in parents\",\r\n              fields: 'files(name,id)'\r\n            })\r\n            .then((response) => {\r\n              queriedSubFolder = response.data;\r\n            //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n            });\r\n    }\r\n\r\n    if (subFolder !== 'Photos') {\r\n        await axios\r\n            .post(baseURL+'/getFolder', {\r\n                q: \"mimeType='application/vnd.google-apps.folder' and name='Received' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n                fields: 'files(name,id)'\r\n            })\r\n            .then((response) => {\r\n                queriedSubFolder = response.data;\r\n                // console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n            });\r\n    }\r\n\r\n    await axios\r\n        .post(baseURL+'/listChildrenFolders', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'nextPageToken, files(id, name)',\r\n            spaces: 'drive',\r\n            pageToken: pageToken\r\n        })\r\n        .then((response) => {\r\n            queriedChildrenList = response.data;\r\n            // console.log('End getSubFolderChildrenList ' + queriedChildrenList.files[0].name)\r\n        });\r\n    \r\n    var latestFile = '';\r\n    var sortedChildrenList = queriedChildrenList.files.sort((a, b) => (a.name > b.name) ? 1 : -1);\r\n    // console.log(sortedChildrenList);\r\n    if (sortedChildrenList.length === 0) {\r\n        // console.log('No folders');\r\n        latestFile = '00';\r\n    } else {\r\n        latestFile = await sortedChildrenList[sortedChildrenList.length - 1].name.toString();\r\n    }\r\n    var date = await moment().format(\"DD MMMM YYYY\").toLocaleString();\r\n    var fileNumber = await Number(latestFile.substring(0, 2));\r\n    await fileNumber++;\r\n    if (fileNumber.toString().length === 1) {\r\n        fileNumber = await '0' + fileNumber;\r\n    }\r\n    var name = await fileNumber + ' - ' + date;\r\n    await axios\r\n        .post(baseURL+'/createFolder', {\r\n            name: name,\r\n            parents: [queriedSubFolder[0].id],\r\n            mimeType: 'application/vnd.google-apps.folder'\r\n        })\r\n        .then((response) => {\r\n            createdUploadFolder = response.data.id;\r\n            // console.log('End createFolder ' + createdUploadFolder)\r\n        });\r\n\r\n    for (var i = 0; i < fileArray.length; i++) {\r\n        const formData = new FormData();\r\n        await formData.append('file', fileArray[i]);\r\n        await formData.append('id', createdUploadFolder);\r\n\r\n        try {\r\n            await axios.post(baseURL + '/uploadFile', formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n            });\r\n        } catch (err) {\r\n            if (err.response.status === 500) {\r\n            // setMessage('There was a problem with the server');\r\n            } else {\r\n            // setMessage(err.response.data.msg);\r\n            }\r\n        }\r\n    }\r\n    return [createdUploadFolder, name];\r\n}\r\n\r\nexport async function savedIssuedDocIssuedAPI(queriedJobFolder, fileArray) {\r\n    var queriedSubFolder = null;\r\n    var queriedChildrenList = null;\r\n    var createdUploadFolder = null;\r\n    var pageToken = null;\r\n\r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='CAD' and '\" + queriedJobFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            queriedSubFolder = response.data;\r\n        //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n        });\r\n\r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='SY' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            queriedSubFolder = response.data;\r\n        //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n        });\r\n\r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='Issued' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            queriedSubFolder = response.data;\r\n        //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n        });\r\n\r\n    await axios\r\n        .post(baseURL+'/listChildrenFolders', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'nextPageToken, files(id, name)',\r\n            spaces: 'drive',\r\n            pageToken: pageToken\r\n        })\r\n        .then((response) => {\r\n            queriedChildrenList = response.data;\r\n            // console.log('End getSubFolderChildrenList ' + queriedChildrenList.files[0].name)\r\n        });\r\n    \r\n    var latestFile = '';\r\n    var sortedChildrenList = queriedChildrenList.files.sort((a, b) => (a.name > b.name) ? 1 : -1);\r\n    // console.log(sortedChildrenList);\r\n    if (sortedChildrenList.length === 0) {\r\n        // console.log('No folders');\r\n        latestFile = '00';\r\n    } else {\r\n        latestFile = await sortedChildrenList[sortedChildrenList.length - 1].name.toString();\r\n    }\r\n    var date = await moment().format(\"DD MMMM YYYY\").toLocaleString();\r\n    var fileNumber = await Number(latestFile.substring(0, 2));\r\n    await fileNumber++;\r\n    if (fileNumber.toString().length === 1) {\r\n        fileNumber = await '0' + fileNumber;\r\n    }\r\n    var name = await fileNumber + ' - ' + date;\r\n    await axios\r\n        .post(baseURL+'/createFolder', {\r\n            name: name,\r\n            parents: [queriedSubFolder[0].id],\r\n            mimeType: 'application/vnd.google-apps.folder'\r\n        })\r\n        .then((response) => {\r\n            createdUploadFolder = response.data.id;\r\n            // console.log('End createFolder ' + createdUploadFolder)\r\n        });\r\n\r\n    for (var i = 0; i < fileArray.length; i++) {\r\n        const formData = new FormData();\r\n        await formData.append('file', fileArray[i]);\r\n        await formData.append('id', createdUploadFolder);\r\n\r\n        try {\r\n            await axios.post(baseURL + '/uploadFile', formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n            });\r\n        } catch (err) {\r\n            if (err.response.status === 500) {\r\n            // setMessage('There was a problem with the server');\r\n            } else {\r\n            // setMessage(err.response.data.msg);\r\n            }\r\n        }\r\n    }\r\n    return [createdUploadFolder, name];\r\n}\r\n\r\nexport async function savedIssuedDocCurrentAPI(queriedJobFolder, fileArray) {\r\n    var queriedSubFolder = null;\r\n    var queriedChildrenList = null;\r\n    // var createdUploadFolder = null;\r\n    var pageToken = null;\r\n    var supersededFolder = null;\r\n\r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='CAD' and '\" + queriedJobFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            queriedSubFolder = response.data;\r\n        //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n        });\r\n\r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='SY' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            queriedSubFolder = response.data;\r\n        //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n        });\r\n\r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='Current PDF' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            queriedSubFolder = response.data;\r\n        //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n        });\r\n        \r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='SS' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            supersededFolder = response.data;\r\n            // console.log('End getSubFolderID ' + supersededFolder[0].id)\r\n        });\r\n\r\n    await axios\r\n        .post(baseURL+'/listChildrenFolders', {\r\n            q: \"'\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'nextPageToken, files(id, name)',\r\n            spaces: 'drive',\r\n            pageToken: pageToken\r\n        })\r\n        .then((response) => {\r\n            queriedChildrenList = response.data;\r\n            // console.log('End getSubFolderChildrenList ' + queriedChildrenList.files[0].name)\r\n        });\r\n    \r\n    var supersededFiles = [];\r\n    var outdatedFiles = [];\r\n    await queriedChildrenList.files.forEach(function (existingFile) {\r\n        for (var i = 0; i < fileArray.length; i++) {\r\n            var existing_revision_index = existingFile.name.lastIndexOf(\"_\");\r\n            if (existing_revision_index !== -1) {\r\n                var existing_base_name = existingFile.name.substr(0,existing_revision_index);\r\n                var new_revision_index = fileArray[i].name.lastIndexOf(\"_\");\r\n                if (new_revision_index !== -1) {\r\n                    var new_base_name = fileArray[i].name.substr(0,new_revision_index);\r\n                    if (existing_base_name === new_base_name) {\r\n                        var existing_revision = existingFile.name.substr(existing_revision_index + 1);\r\n                        var new_revision = fileArray[i].name.substr(new_revision_index + 1);\r\n                        var existing_decimal_index = existing_revision.lastIndexOf(\".\");\r\n                        var new_decimal_index = new_revision.lastIndexOf(\".\");\r\n                        existing_revision = existing_revision.substr(0,existing_decimal_index);\r\n                        new_revision = new_revision.substr(0,new_decimal_index);\r\n                        if (isNaN(new_revision) === false && isNaN(existing_revision) === false) {\r\n                            var existing_revision_number = Number(existing_revision);\r\n                            var new_revision_number = Number(new_revision);\r\n                            if (new_revision_number >= existing_revision_number) {\r\n                                supersededFiles.push(existingFile.id);\r\n                            } else {\r\n                                outdatedFiles.push(i);\r\n                            }\r\n                        } else if (isNaN(new_revision) === true && isNaN(existing_revision) === true) {\r\n                            var existing_revision_letter = Number(existing_revision.charCodeAt(0));\r\n                            var new_revision_letter = Number(new_revision.charCodeAt(0));\r\n                            if (new_revision_letter >= existing_revision_letter) {\r\n                                supersededFiles.push(existingFile.id);\r\n                            } else {\r\n                                outdatedFiles.push(i);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    for (var i = 0; i < supersededFiles.length; i++) {\r\n        const formData = new FormData();\r\n        await formData.append('fileId', supersededFiles[i]);\r\n        await formData.append('addParentId', supersededFolder[0].id);\r\n        await formData.append('removeParentId', queriedSubFolder[0].id);\r\n\r\n        try {\r\n            await axios.post(baseURL + '/moveFile', formData);\r\n        } catch (err) {\r\n            if (err.response.status === 500) {\r\n            // setMessage('There was a problem with the server');\r\n            } else {\r\n            // setMessage(err.response.data.msg);\r\n            }\r\n        }\r\n    }\r\n\r\n    for (var j = 0; j < fileArray.length; j++) {\r\n        if (!outdatedFiles.includes(j)) {\r\n            const formData = new FormData();\r\n            await formData.append('file', fileArray[j]);\r\n            await formData.append('id', queriedSubFolder[0].id);\r\n\r\n            try {\r\n                await axios.post(baseURL + '/uploadFile', formData, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data'\r\n                }\r\n                });\r\n            } catch (err) {\r\n                if (err.response.status === 500) {\r\n                // setMessage('There was a problem with the server');\r\n                } else {\r\n                // setMessage(err.response.data.msg);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport async function cleanXlsxAPI(queriedJobFolder, fileNameArray) {\r\n    var queriedSubFolder = null;\r\n    var queriedChildrenList = null;\r\n    // var createdUploadFolder = null;\r\n    var pageToken = null;\r\n    var supersededFolder = null;\r\n\r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='CAD' and '\" + queriedJobFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            queriedSubFolder = response.data;\r\n        //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n        });\r\n\r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='SY' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            queriedSubFolder = response.data;\r\n        //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n        });\r\n\r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='Current PDF' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            queriedSubFolder = response.data;\r\n        //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n        });\r\n        \r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='SS' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            supersededFolder = response.data;\r\n            // console.log('End getSubFolderID ' + supersededFolder[0].id)\r\n        });\r\n\r\n    await axios\r\n        .post(baseURL+'/listChildrenFolders', {\r\n            q: \"'\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'nextPageToken, files(id, name)',\r\n            spaces: 'drive',\r\n            pageToken: pageToken\r\n        })\r\n        .then((response) => {\r\n            queriedChildrenList = response.data;\r\n            // console.log('End getSubFolderChildrenList ' + queriedChildrenList.files[0].name)\r\n        });\r\n    \r\n    var supersededFiles = [];\r\n    // var outdatedFiles = [];\r\n    await queriedChildrenList.files.forEach(function (existingFile) {\r\n        var existing_decimal_index = existingFile.name.lastIndexOf(\".\");\r\n        if (existing_decimal_index !== -1) {\r\n            var existingFileName = existingFile.name.substr(0,existing_decimal_index);\r\n            for (var i = 0; i < fileNameArray.length; i++) {\r\n                if (existingFileName === fileNameArray[i]) {\r\n                    break;\r\n                } else if (i === (fileNameArray.length-1)) {\r\n                    supersededFiles.push(existingFile.id);\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    for (var i = 0; i < supersededFiles.length; i++) {\r\n        const formData = new FormData();\r\n        await formData.append('fileId', supersededFiles[i]);\r\n        await formData.append('addParentId', supersededFolder[0].id);\r\n        await formData.append('removeParentId', queriedSubFolder[0].id);\r\n\r\n        try {\r\n            await axios.post(baseURL + '/moveFile', formData);\r\n        } catch (err) {\r\n            if (err.response.status === 500) {\r\n            // setMessage('There was a problem with the server');\r\n            } else {\r\n            // setMessage(err.response.data.msg);\r\n            }\r\n        }\r\n    }\r\n}","import React, { useRef, useState, useEffect } from 'react'\r\nimport { Alert, Navbar, Container, Nav, Row, Col, Card, Form, Button } from 'react-bootstrap'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport { savedReceivedDocAPI, savedIssuedDocIssuedAPI, savedIssuedDocCurrentAPI, cleanXlsxAPI } from '../functions/HelperFunctions'\r\nimport { RemarkModal } from './RemarkModal'\r\nimport PuffLoader from \"react-spinners/PuffLoader\"\r\nimport * as XLSX from \"xlsx\"\r\nimport { Typeahead } from 'react-bootstrap-typeahead';\r\n\r\nexport default function Dashboard() {\r\n  const baseURL = \"https://sy-custom-api-web-app.ts.r.appspot.com\";\r\n\r\n  const [options, setOptions] = useState([])\r\n\r\n  useEffect(() => {\r\n    const jobs = []\r\n    var decodedAuth = process.env.REACT_APP_PROJECTWORKS_API_CONSUMER_KEY + ':' + process.env.REACT_APP_PROJECTWORKS_API_CONSUMER_SECRET\r\n    var encodedAuth = Buffer.from(decodedAuth).toString('base64')\r\n    const promises = new Array(1)\r\n      .fill()\r\n      .map((v, i) => \r\n      fetch(`https://api.projectworksapp.com/api/v1.0/Projects?page=1&pageSize=20000&includeCustomFields=true`,\r\n        {\r\n          headers: {\r\n            'Authorization': 'Basic ' + encodedAuth,\r\n          }\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => data.forEach(obj => {\r\n          var projectNumber = obj['ProjectNumber']\r\n          var projectName = obj['ProjectName']\r\n          var projectOffice = obj['CustomFields'][0]['Value']\r\n          if (projectOffice === null || projectOffice === \"1\") {\r\n            projectOffice = \"M\"\r\n          } else if (projectOffice === \"2\") {\r\n            projectOffice = \"A\"\r\n          }\r\n          if (projectNumber.includes('.')) {\r\n            jobs.push(projectNumber.substring(0, projectNumber.indexOf('.')) + projectOffice + \" | \" + projectName)\r\n          } else { \r\n            jobs.push(projectNumber + projectOffice + \" | \" + projectName)\r\n          }\r\n        }))\r\n      )\r\n    setOptions(jobs)\r\n  }, [])\r\n\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  const [error, setError] = useState(\"\")\r\n  const { currentUser, logout } = useAuth()\r\n  const history = useHistory()\r\n  \r\n  async function handleLogout() {\r\n    setError(\"\")\r\n\r\n    try {\r\n      await logout()\r\n      history.push(\"/login\")\r\n    } catch {\r\n      setError(\"Failed to log out\")\r\n    }\r\n  }\r\n\r\n  const saveReceivedDocInput = useRef(null)\r\n  const saveIssuedDocInput = useRef(null)\r\n  const readXlsxFile = useRef(null)\r\n\r\n  const [queriedJobFolder, setQueriedJobFolder] = useState(null);\r\n\r\n  async function getJobID(name) {\r\n    await axios\r\n      .post(baseURL+'/getFolder', {\r\n        q: \"mimeType='application/vnd.google-apps.folder' and name='\" + name + \"'\",\r\n        fields: 'files(name,id)'\r\n      })\r\n      .then(async (response) => {\r\n        const myQueriedJobFolder = await response.data;\r\n        await setQueriedJobFolder(myQueriedJobFolder);\r\n        if (myQueriedJobFolder === null || myQueriedJobFolder.length === 0) {\r\n          await setShowFileUploadSuccess(false);\r\n          setFileUploadError(\"No job was found with that number\");\r\n          setShowFileUploadError(true);\r\n        } else {\r\n          await setShowFileUploadError(false);\r\n          await setMessage('Job ' + myQueriedJobFolder[0].name + ' selected');\r\n          await setShowFileUploadSuccess(true);\r\n        }\r\n      });\r\n  }\r\n  \r\n  const [message, setMessage] = useState('')\r\n\r\n  const [fileUploadError, setFileUploadError] = useState('')\r\n  const [showFileUploadError, setShowFileUploadError] = useState(false)\r\n  const [showFileUploadSuccess, setShowFileUploadSuccess] = useState(false)\r\n\r\n  const [remarkData, setRemarkData] = useState('');\r\n\r\n  async function saveReceivedDoc(subFolder, fileArrayFunc) {\r\n    if (queriedJobFolder === null || queriedJobFolder.length === 0) {\r\n      setFileUploadError(\"No job selected. Please select a job before attempting to upload a file.\");\r\n      setShowFileUploadError(true);\r\n      return;\r\n    } else {\r\n      await setShowFileUploadSuccess(false);\r\n      await setLoading(true);\r\n      await setRemarkData(await savedReceivedDocAPI(queriedJobFolder, subFolder, fileArrayFunc));\r\n      await handleShowRemarkModal();\r\n      \r\n      await setLoading(false);\r\n      await setShowFileUploadError(false);\r\n      await setMessage('Successfully uploaded ' + fileArrayFunc.length + ' files');\r\n      await setShowFileUploadSuccess(true);\r\n      \r\n    }\r\n  }\r\n\r\n  async function saveIssuedDoc(fileArrayFunc) {\r\n    if (queriedJobFolder === null || queriedJobFolder.length === 0) {\r\n      setFileUploadError(\"No job selected. Please select a job before attempting to upload a file.\");\r\n      setShowFileUploadError(true);\r\n      return;\r\n    } else {\r\n      await setShowFileUploadSuccess(false);\r\n      await setLoading(true);\r\n      await setRemarkData(await savedIssuedDocIssuedAPI(queriedJobFolder, fileArrayFunc));\r\n      await savedIssuedDocCurrentAPI(queriedJobFolder, fileArrayFunc);\r\n      await handleShowRemarkModal();\r\n      \r\n      await setLoading(false);\r\n      await setShowFileUploadError(false);\r\n      await setMessage('Successfully uploaded ' + fileArrayFunc.length + ' files');\r\n      await setShowFileUploadSuccess(true);\r\n      \r\n    }\r\n  }\r\n\r\n  var xlsxItems = [];\r\n\r\n  async function cleanXlsx(xlsxFile) {\r\n    if (queriedJobFolder === null || queriedJobFolder.length === 0) {\r\n      setFileUploadError(\"No job selected. Please select a job before attempting to upload a file.\");\r\n      setShowFileUploadError(true);\r\n      return;\r\n    } else {\r\n      await setShowFileUploadSuccess(false);\r\n      await setLoading(true);\r\n      await readExcel(xlsxFile);\r\n      await cleanXlsxAPI(queriedJobFolder, await getFileList(xlsxItems));\r\n      \r\n      await setLoading(false);\r\n      await setShowFileUploadError(false);\r\n      await setMessage('Successfully uploaded cleaned files');\r\n      await setShowFileUploadSuccess(true);\r\n      \r\n    }\r\n  }\r\n\r\n  async function readExcel(file) {\r\n    const promise = new Promise(async (resolve, reject) => {\r\n      const fileReader = new FileReader();\r\n      fileReader.readAsArrayBuffer(file);\r\n\r\n      fileReader.onload = async (e) => {\r\n        const bufferArray = e.target.result;\r\n\r\n        const wb = XLSX.read(bufferArray, { type: \"buffer\" });\r\n\r\n        const wsname = wb.SheetNames[0];\r\n\r\n        const ws = wb.Sheets[wsname];\r\n\r\n        const data = XLSX.utils.sheet_to_json(ws);\r\n\r\n        resolve(data);\r\n      };\r\n\r\n      fileReader.onerror = (error) => {\r\n        reject(error);\r\n      };\r\n    });\r\n\r\n    await promise.then(async (d) => {\r\n      xlsxItems = d;\r\n    });\r\n  };\r\n\r\n  async function getFileList(sheetItems) {\r\n    var xlsxFileList = [];\r\n    for (var i = 0; i < sheetItems.length; i++) {\r\n      const objectArray = Object.values(sheetItems[i]);\r\n      var xlsxFileName = queriedJobFolder[0].name + \"_\" + objectArray[0] + \"_\" + objectArray[1] + \"_\" + objectArray[2];\r\n      xlsxFileList.push(xlsxFileName);\r\n    }\r\n    xlsxItems = [];\r\n    return xlsxFileList;\r\n  }\r\n  \r\n  const jobNumberRef = useRef()\r\n  const [typeAheadValue, setTypeAheadValue] = useState('');\r\n\r\n  function handleSelectJobSubmit(e) {\r\n    e.preventDefault()\r\n    if (typeAheadValue === '' && selected.length === 0) {\r\n      setFileUploadError(\"Job field cannot be empty\");\r\n      setShowFileUploadError(true);\r\n    } else if (typeAheadValue.length <= 5 && selected.length !== 0) {\r\n      var jobIdSearch = selected[0].substring(0, selected[0].indexOf(' | '))\r\n      getJobID(jobIdSearch)\r\n    } else if (typeAheadValue.includes(' | ')) {\r\n      setTypeAheadValue(typeAheadValue.substring(0, typeAheadValue.indexOf(' | ')))\r\n      getJobID(typeAheadValue)\r\n    } else {\r\n      getJobID(typeAheadValue)\r\n    }\r\n  }\r\n\r\n  function handleInputChange(input) {\r\n    setTypeAheadValue(input)\r\n  }\r\n\r\n  const [receivedSubFolder, setReceivedSubFolder] = useState('')\r\n\r\n  async function onChangeReceived(e) {\r\n    if (e.target.files[0] !== null) {\r\n      if (receivedSubFolder !== '') {\r\n        await saveReceivedDoc(receivedSubFolder, e.target.files);\r\n        setReceivedSubFolder('');\r\n      }\r\n    }\r\n    e.target.value = null; // reset onChange\r\n  };\r\n\r\n  var issuedFiles = [];\r\n\r\n  async function onChangeIssued(e) {\r\n    if (e.target.files[0] !== null) {\r\n      issuedFiles = await [];\r\n      for (var i = 0; i < e.target.files.length; i++) {\r\n        await issuedFiles.push(e.target.files[i]);\r\n      }\r\n      await saveIssuedDoc(issuedFiles);\r\n      e.target.value = await null;\r\n      // await document.getElementById(\"liveReadXlsxFile\").click();\r\n    }\r\n  };\r\n  \r\n  async function onChangeXlsx(e) {\r\n    if (e.target.files[0] !== null) {\r\n      await cleanXlsx(e.target.files[0], issuedFiles);\r\n    }\r\n    issuedFiles = await [];\r\n    e.target.value = await null;\r\n  };\r\n\r\n  function onButtonClickReceived() {\r\n    saveReceivedDocInput.current.click();\r\n  };\r\n  \r\n  function onButtonClickIssued() {\r\n    saveIssuedDocInput.current.click();\r\n  }; \r\n  \r\n  function onButtonClickXlsx() {\r\n    readXlsxFile.current.click();\r\n  };\r\n  \r\n  const [showRemarkModal, setShowRemarkModal] = useState(false);\r\n  const handleCloseRemarkModal = () => setShowRemarkModal(false);\r\n  const handleShowRemarkModal = () => setShowRemarkModal(true);\r\n  const [selected, setSelected] = useState([]);\r\n\r\n  return (\r\n    <>\r\n    <RemarkModal show={showRemarkModal} onHide={handleCloseRemarkModal} remarkdata={remarkData}/>\r\n      <Navbar className=\"\" style={{ minHeight: \"7vh\"}}>\r\n        <Container style={{ minWidth: \"97vw\" }}>\r\n          <Navbar.Brand>\r\n            <img\r\n            alt=\"\"\r\n            src=\"https://systructures.com.au/wp-content/uploads/2020/05/sy-logo.png\"\r\n            className=\"d-inline-block align-top\"\r\n          />{' '}\r\n          </Navbar.Brand>\r\n          <Nav className=\"mr-auto\">\r\n            <Nav.Link href=\"/update-profile\">Update Profile</Nav.Link>\r\n            <Nav.Link href=\"/signup\">Add New User</Nav.Link>\r\n            {/* <Nav.Link>Help</Nav.Link> */}\r\n            <Link style={{ backgroundColor: \"#666666\", color: \"#FFFFFF\" }} onClick={handleLogout} className=\"btn pull-right\">\r\n              Log Out\r\n            </Link>\r\n          </Nav>\r\n        </Container>\r\n      </Navbar>\r\n\r\n      <Alert show={showFileUploadSuccess} variant=\"success\" className=\"d-flex align-items-center justify-content-between flex-row\">\r\n        {message}\r\n        <Button onClick={() => setShowFileUploadSuccess(false)} variant=\"outline-success\">\r\n          Close\r\n        </Button>\r\n      </Alert>\r\n      <Alert show={showFileUploadError} variant=\"danger\" className=\"d-flex align-items-center justify-content-between flex-row\">\r\n        {fileUploadError}\r\n        <Button onClick={() => setShowFileUploadError(false)} variant=\"outline-danger\">\r\n          Close\r\n        </Button>\r\n      </Alert>\r\n      {\r\n        loading ?\r\n        \r\n        <div style = {{ height:\"93vh\", width:\"100%\", display:\"flex\", justifyContent:\"center\", alignItems:\"center\", flexDirection:\"column\" }}>\r\n          <PuffLoader color={'#8B0000'} loading={loading} size={150}/>\r\n          <h5 className=\"mt-4\">Files are being uploaded - this process may take a while</h5>\r\n          <h5>Please do not close tab or browser</h5>\r\n        </div>\r\n        \r\n        :\r\n        \r\n        <Container fluid>\r\n        <Row style={{ height: \"25vh\" }} className=\"mb-4\">\r\n          <Col xs={3} className=\"d-flex align-items-start justify-content-center mt-2\">\r\n            <Card style={{ minHeight: \"90%\", borderRadius: \"20px\", backgroundColor: \"#810B0A\", borderColor: \"lightgray\" }} className=\"w-75 m-2\">\r\n              <Container style={{ color: \"#FFF\" }} className=\"mt-3 text-center border-bottom\">\r\n                <h4>CREATE NEW JOB</h4>\r\n              </Container>\r\n              <Card.Body style={{ backgroundColor: \"white\", borderBottomLeftRadius: \"18px\", borderBottomRightRadius: \"18px\" }} className=\"d-flex align-items-center justify-content-center\">\r\n                <Button className=\"w-50\" variant=\"outline-dark\" type=\"submit\" disabled>CREATE</Button>\r\n              </Card.Body>\r\n            </Card>\r\n          </Col>\r\n          <Col xs={6} className=\"align-middle mt-2\">\r\n            <Card style={{ minHeight: \"90%\", borderRadius: \"20px\", backgroundColor: \"#810B0A\", borderColor: \"lightgray\" }} className=\"m-2\">\r\n              <Container style={{ color: \"#FFF\" }} className=\"mt-3 text-center border-bottom\">\r\n                <h4>SELECT JOB</h4>\r\n              </Container>\r\n              <Card.Body style={{ backgroundColor: \"white\", borderBottomLeftRadius: \"18px\", borderBottomRightRadius: \"18px\" }}>\r\n                <Form className=\"d-flex align-items-center justify-content-center flex-row\" onSubmit={handleSelectJobSubmit}>\r\n                  <Container style={{ width: \"200%\" }}>\r\n                    <Form.Group id=\"job-number\">\r\n                        <Form.Label className=\"mb-0\">JOB NUMBER</Form.Label>\r\n                        <Typeahead\r\n                          id=\"typeAheadID\"\r\n                          onChange={setSelected}\r\n                          options={options}\r\n                          placeholder=\"Enter Job\"\r\n                          onInputChange={handleInputChange}\r\n                          selected={selected} required\r\n                        />\r\n                        <Form.Control type=\"text\" placeholder=\"Enter Job #\" ref={jobNumberRef} style={{display: 'none'}}></Form.Control>\r\n                    </Form.Group>\r\n                    <Button className=\"w-100 mt-3 mb-2\" variant=\"outline-dark\" type=\"submit\">SELECT</Button>\r\n                  </Container>\r\n                  <Container className=\"text-center\">\r\n                    <div>CURRENT JOB</div> {queriedJobFolder === null || queriedJobFolder.length === 0 ? 'No Job Selected' : queriedJobFolder[0].name}\r\n                  </Container>\r\n                </Form>\r\n              </Card.Body>\r\n              {error && <Alert variant=\"danger\">{error}</Alert>}\r\n            </Card>\r\n          </Col>\r\n          <Col className=\"d-flex align-items-center flex-column justify-content-evenly\">\r\n\r\n            <input type='file' onChange={onChangeIssued} ref={saveIssuedDocInput} style={{display: 'none'}} accept=\".pdf\" multiple/>\r\n            <Button className=\"w-50\" variant=\"outline-dark\" onClick={() => {onButtonClickIssued()}}>ISSUE SY DOCUMENT/S</Button>\r\n\r\n            <input type='file' onChange={onChangeXlsx} ref={readXlsxFile} style={{display: 'none'}} accept=\".xlsx, .xls, .csv\"/>\r\n            <Button className=\"w-50\" variant=\"outline-dark\" onClick={() => {onButtonClickXlsx()}}>CLEAN CURRENT PDF</Button>\r\n\r\n          </Col>\r\n        </Row>\r\n        <Row style={{ height: \"34vh\" }}>\r\n          <Col>\r\n            <Container className=\"text-center\" style={{ height: \"10%\" }}>\r\n              <h5>SAVE RECEIVED DOCUMENTS</h5>\r\n            </Container>\r\n            <Container className=\"d-flex align-items-center flex-column justify-content-evenly\"  style={{ height: \"80% \" }}>\r\n              \r\n              <input type='file' onChange={onChangeReceived} ref={saveReceivedDocInput} style={{display: 'none'}} multiple/>\r\n\r\n              <Button className=\"w-100\" variant=\"outline-dark\" onClick={() => {setReceivedSubFolder('CAD'); onButtonClickReceived()}}>CAD</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" onClick={() => {setReceivedSubFolder('Photos'); onButtonClickReceived()}}>PHOTOS</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" onClick={() => {setReceivedSubFolder('Shop Drawings'); onButtonClickReceived()}}>SHOP DRAWINGS</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" onClick={() => {setReceivedSubFolder('Geotechnical'); onButtonClickReceived()}}>GEOTECHNICAL</Button>\r\n\r\n            </Container>\r\n          </Col>\r\n          <Col>\r\n            <Container className=\"text-center\" style={{ height: \"10%\"}}>\r\n              <h5>ADMIN DOCUMENTS</h5>\r\n            </Container>\r\n            <Container className=\"d-flex align-items-center flex-column justify-content-evenly\"  style={{ height: \"80% \" }}>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>FEE PROPOSAL</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>FEE VARIATION</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>LETTER</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>REPORT</Button>\r\n            </Container>\r\n          </Col>\r\n          <Col>\r\n            <Container className=\"text-center\" style={{ height: \"10%\" }}>\r\n                <h5>CONCEPT</h5>\r\n              </Container>\r\n              <Container className=\"d-flex align-items-center flex-column justify-content-evenly\"  style={{ height: \"80% \" }}>\r\n                <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>DESIGN BRIEF</Button>\r\n                <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>GEOTECH FEE REQUEST</Button>\r\n                <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>CONCEPT DESIGN CHECKLIST</Button>\r\n              </Container>\r\n          </Col>\r\n          <Col>\r\n            <Container className=\"text-center\" style={{ height: \"10%\" }}>\r\n              <h5>DESIGN & DOCUMENTATION</h5>\r\n            </Container>\r\n            <Container className=\"d-flex align-items-center flex-column justify-content-evenly\"  style={{ height: \"80% \" }}>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>SAFETY IN DESIGN REPORT</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>STRUCTURAL SPECIFICATIONS</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>CALCULATION DOCUMENT</Button>\r\n            </Container>\r\n          </Col>\r\n        </Row>\r\n        <Row style={{ height: \"34vh\" }}>\r\n          <Col>\r\n            <Container className=\"text-center\" style={{ height: \"10%\" }}>\r\n              <h5>CONSTRUCTION</h5>\r\n            </Container>\r\n            <Container className=\"d-flex align-items-center flex-column justify-content-evenly\"  style={{ height: \"80% \" }}>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>SITE INSPECTION REPORT</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>LETTER OF COMPLIANCE</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>SHOP DRAWING REVIEW</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>CERTIFICATION LETTER</Button>\r\n            </Container>\r\n          </Col>\r\n          <Col>\r\n            <Container className=\"text-center\" style={{ height: \"10%\" }}>\r\n              <h5>QA</h5>\r\n            </Container>\r\n            <Container className=\"d-flex align-items-center flex-column justify-content-evenly\"  style={{ height: \"80% \" }}>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>VERIFY ENGINEERING CHECKLIST</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>VERIFY BIM CHECKLIST</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>VERIFY DRAWING REVIEW</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>VERIFY SAFETY IN DESIGN</Button>\r\n            </Container>\r\n          </Col>\r\n          <Col></Col>\r\n          <Col></Col>\r\n        </Row>\r\n        {/* <div className=\"w100\" style={{ maxWidth: \"400px\" }}>\r\n          <Card>\r\n            <Card.Body>\r\n              <h2 className=\"text-center mb-4\">Profile</h2>\r\n              {error && <Alert variant=\"danger\">{error}</Alert>}\r\n              <strong>Email:</strong> {currentUser.email}\r\n              <Link to=\"/update-profile\" className=\"btn btn-primary w-100 mt-3\">\r\n                Update Profile\r\n              </Link>\r\n            </Card.Body>\r\n          </Card>\r\n          <div className=\"w-100 text-center mt-2\">\r\n            <Button variant=\"link\" onClick={handleLogout}>\r\n              Log Out\r\n            </Button>\r\n          </div>\r\n        </div> */}\r\n      </Container>\r\n      }\r\n    </>\r\n  )\r\n}","import React, { Component } from \"react\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {Modal, Button, Form, Container} from 'react-bootstrap';\r\nimport axios from 'axios'\r\n\r\n\r\nexport class RemarkModal extends Component {\r\n\r\n    async handleSubmit(e, fileID, originalName) {\r\n        e.preventDefault();\r\n        if (e.target.Remark.value !== '') { \r\n            await this.renameID(fileID, originalName, e.target.Remark.value);\r\n        }\r\n        e.target.Remark.value = await null; // reset on submit\r\n    }\r\n    \r\n    renameID(fileID, originalName, remark) {\r\n        axios\r\n          .post('https://sy-custom-api-web-app.ts.r.appspot.com/renameID', {\r\n            name: originalName + \" - \" + remark,\r\n            fileId: fileID\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal {...this.props} backdrop='static' keyboard=\"false\">\r\n                <Modal.Header>\r\n                <Modal.Title>Add remark/description for uploaded files</Modal.Title>\r\n                </Modal.Header>\r\n                <Form onSubmit={(e) => { this.handleSubmit(e, this.props.remarkdata[0], this.props.remarkdata[1]) }}>\r\n                    <Modal.Body>\r\n                        <Container>\r\n                            <Form.Group className=\"mb-2\" id=\"job-number\">\r\n                                <Form.Label className=\"mb-0\">REMARK/DESCRIPTION</Form.Label>\r\n                                <Form.Control type=\"text\" name=\"Remark\" placeholder=\"Remark goes here\"/>\r\n                            </Form.Group>\r\n                        </Container>\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={this.props.onHide}>\r\n                        No Remark\r\n                    </Button>\r\n                    <Button variant=\"primary\" type=\"submit\" onClick={this.props.onHide}>\r\n                        Add Remark\r\n                    </Button>\r\n                    </Modal.Footer>\r\n                </Form>\r\n            </Modal>\r\n        );\r\n    }\r\n}"],"sourceRoot":""}