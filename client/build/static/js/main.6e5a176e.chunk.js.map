{"version":3,"sources":["firebase.js","contexts/AuthContext.js","components/Signup.js","functions/HelperFunctions.js","components/RemarkModal.js","components/Dashboard.js","components/Login.js","components/PrivateRoute.js","components/ForgotPassword.js","components/UpdateProfile.js","components/App.js","index.js"],"names":["app","firebase","initializeApp","apiKey","process","authDomain","REACT_APP_FIREBASE_AUTH_DOMAI","projectId","storageBucket","messagingSenderId","appId","auth","AuthContext","React","createContext","useAuth","useContext","AuthProvider","children","useState","currentUser","setCurrentUser","loading","setLoading","useEffect","onAuthStateChanged","user","value","login","email","password","signInWithEmailAndPassword","signup","createUserWithEmailAndPassword","logout","signOut","resetPassword","sendPasswordResetEmail","updateEmail","updatePassword","Provider","Signup","emailRef","useRef","passwordRef","passwordConfirmRef","error","setError","history","useHistory","e","a","preventDefault","current","push","Container","className","style","minHeight","maxWidth","Card","Body","Alert","variant","Form","onSubmit","Group","id","Label","Control","type","ref","required","Button","disabled","to","baseURL","savedReceivedDocAPI","queriedJobFolder","subFolder","fileArray","queriedSubFolder","queriedChildrenList","createdUploadFolder","pageToken","axios","post","q","fields","then","response","data","spaces","latestFile","sortedChildrenList","files","sort","b","name","length","toString","moment","format","toLocaleString","date","Number","substring","fileNumber","parents","mimeType","i","formData","FormData","append","headers","status","savedIssuedDocIssuedAPI","savedIssuedDocCurrentAPI","supersededFolder","supersededFiles","outdatedFiles","forEach","existingFile","existing_revision_index","lastIndexOf","existing_base_name","substr","new_revision_index","existing_revision","new_revision","existing_decimal_index","new_decimal_index","isNaN","existing_revision_number","existing_revision_letter","charCodeAt","j","includes","cleanXlsxAPI","fileNameArray","existingFileName","RemarkModal","fileID","originalName","target","Remark","this","renameID","remark","fileId","Modal","props","backdrop","keyboard","Header","Title","handleSubmit","remarkdata","placeholder","Footer","onClick","onHide","Component","Dashboard","saveReceivedDocInput","saveIssuedDocInput","readXlsxFile","setQueriedJobFolder","message","setMessage","fileUploadError","setFileUploadError","showFileUploadError","setShowFileUploadError","showFileUploadSuccess","setShowFileUploadSuccess","remarkData","setRemarkData","saveReceivedDoc","fileArrayFunc","handleShowRemarkModal","saveIssuedDoc","xlsxItems","cleanXlsx","xlsxFile","readExcel","getFileList","file","promise","Promise","resolve","reject","fileReader","FileReader","readAsArrayBuffer","onload","bufferArray","result","wb","XLSX","wsname","SheetNames","ws","Sheets","sheet_to_json","onerror","d","sheetItems","xlsxFileList","objectArray","Object","values","xlsxFileName","jobNumberRef","receivedSubFolder","setReceivedSubFolder","issuedFiles","document","getElementById","click","onButtonClickReceived","showRemarkModal","setShowRemarkModal","show","Navbar","minWidth","Brand","alt","src","Nav","Link","href","backgroundColor","color","height","width","display","justifyContent","alignItems","flexDirection","size","fluid","Row","Col","xs","borderRadius","borderColor","borderBottomLeftRadius","borderBottomRightRadius","myQueriedJobFolder","onChange","accept","multiple","Login","PrivateRoute","component","rest","render","ForgotPassword","UpdateProfile","promises","all","catch","finally","defaultValue","App","exact","path","ReactDOM"],"mappings":"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","file":"static/js/main.6e5a176e.chunk.js","sourcesContent":["import firebase from 'firebase/app'\r\nimport \"firebase/auth\"\r\n\r\nconst app = firebase.initializeApp({\r\n    apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n    authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAI,\r\n    projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n    storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n    messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n    appId: process.env.REACT_APP_FIREBASE_APP_ID\r\n})\r\n\r\nexport const auth = app.auth()\r\nexport default app","import React, { useContext, useState, useEffect } from 'react'\r\nimport { auth } from '../firebase'\r\n\r\nconst AuthContext = React.createContext()\r\n\r\nexport function useAuth() {\r\n    return useContext(AuthContext)\r\n}\r\n\r\nexport function AuthProvider({ children }) {\r\n    const [currentUser, setCurrentUser] = useState()\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    function signup(email, password) {\r\n        return auth.createUserWithEmailAndPassword(email, password)\r\n    }\r\n\r\n    function login(email, password) {\r\n        return auth.signInWithEmailAndPassword(email, password)\r\n    }\r\n\r\n    function logout() {\r\n        return auth.signOut()\r\n    }\r\n\r\n    function resetPassword(email) {\r\n        return auth.sendPasswordResetEmail(email)\r\n    }\r\n\r\n    function updateEmail(email) {\r\n        return currentUser.updateEmail(email)\r\n    }\r\n\r\n    function updatePassword(password) {\r\n        return currentUser.updatePassword(password)\r\n    }\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = auth.onAuthStateChanged(user => {\r\n            setCurrentUser(user)\r\n            setLoading(false)\r\n        })\r\n\r\n        return unsubscribe\r\n    }, [])\r\n\r\n    auth.onAuthStateChanged(user => {\r\n        setCurrentUser(user)\r\n    })\r\n\r\n    const value = {\r\n        currentUser,\r\n        login,\r\n        signup,\r\n        logout,\r\n        resetPassword,\r\n        updateEmail,\r\n        updatePassword\r\n    }\r\n\r\n    return (\r\n        <AuthContext.Provider value={value}>\r\n            {!loading && children}\r\n        </AuthContext.Provider>\r\n    )\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { Card, Form, Button, Alert, Container } from 'react-bootstrap'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { Link, useHistory } from 'react-router-dom'\r\n\r\nexport default function Signup() {\r\n    const emailRef = useRef()\r\n    const passwordRef = useRef()\r\n    const passwordConfirmRef = useRef()\r\n    const { signup } = useAuth()\r\n    const [error, setError] = useState('')\r\n    const [loading, setLoading] = useState(false)\r\n    const history = useHistory()\r\n\r\n    async function handleSubmit(e) {\r\n        e.preventDefault()\r\n\r\n        if (passwordRef.current.value !== passwordConfirmRef.current.value) {\r\n            return setError('Passwords do not match')\r\n        }\r\n\r\n        try {\r\n            setError('')\r\n            setLoading(true)\r\n            await signup(emailRef.current.value, passwordRef.current.value)\r\n            history.push(\"/\")\r\n        } catch {\r\n            setError('Failed to create an account')\r\n        }\r\n\r\n        setLoading(false)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Container className=\"d-flex align-items-center justify-content-center\" style={{ minHeight: \"100vh\" }}>\r\n                <div className=\"w100\" style={{ maxWidth: \"400px\" }}>\r\n                    <Card>\r\n                        <Card.Body>\r\n                            <h2 className=\"text-center mb-4\">Add New User</h2>\r\n                            {error && <Alert variant=\"danger\">{error}</Alert>}\r\n                            <Form onSubmit={handleSubmit}>\r\n                                <Form.Group id=\"email\">\r\n                                    <Form.Label>Email</Form.Label>\r\n                                    <Form.Control type=\"email\" ref={emailRef} required />\r\n                                </Form.Group>\r\n                                <Form.Group id=\"password\">\r\n                                    <Form.Label>Password</Form.Label>\r\n                                    <Form.Control type=\"password\" ref={passwordRef} required />\r\n                                </Form.Group>\r\n                                <Form.Group id=\"password-confirm\">\r\n                                    <Form.Label>Password Confirmation</Form.Label>\r\n                                    <Form.Control type=\"password\" ref={passwordConfirmRef} required />\r\n                                </Form.Group>\r\n                                <Button disabled={loading} className=\"w-100 mt-4\" type=\"submit\">Add New User</Button>\r\n                            </Form>\r\n                        </Card.Body>\r\n                    </Card>\r\n                    <div className=\"w-100 text-center mt-2\">\r\n                        <Link to=\"/\">Cancel</Link>\r\n                    </div>\r\n                </div>\r\n            </Container>\r\n        </>\r\n    )\r\n}","import axios from 'axios'\r\nimport moment from 'moment'\r\n\r\nconst baseURL = \"https://sy-custom-api-web-app.ts.r.appspot.com\";\r\n\r\nexport async function savedReceivedDocAPI(queriedJobFolder, subFolder, fileArray) {\r\n    var queriedSubFolder = null;\r\n    var queriedChildrenList = null;\r\n    var createdUploadFolder = null;\r\n    var pageToken = null;\r\n\r\n    if (subFolder === 'Geotechnical') {\r\n        await axios\r\n            .post(baseURL+'/getFolder', {\r\n                q: \"mimeType='application/vnd.google-apps.folder' and name='Engineering' and '\" + queriedJobFolder[0].id + \"' in parents\",\r\n                fields: 'files(name,id)'\r\n            })\r\n            .then((response) => {\r\n                queriedSubFolder = response.data;\r\n                // console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n            });\r\n\r\n        await axios\r\n            .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='\" + subFolder + \"' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n            })\r\n            .then((response) => {\r\n            queriedSubFolder = response.data;\r\n            //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n            });\r\n    } else {\r\n        await axios\r\n            .post(baseURL+'/getFolder', {\r\n              q: \"mimeType='application/vnd.google-apps.folder' and name='\" + subFolder + \"' and '\" + queriedJobFolder[0].id + \"' in parents\",\r\n              fields: 'files(name,id)'\r\n            })\r\n            .then((response) => {\r\n              queriedSubFolder = response.data;\r\n            //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n            });\r\n    }\r\n\r\n    if (subFolder !== 'Photos') {\r\n        await axios\r\n            .post(baseURL+'/getFolder', {\r\n                q: \"mimeType='application/vnd.google-apps.folder' and name='Received' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n                fields: 'files(name,id)'\r\n            })\r\n            .then((response) => {\r\n                queriedSubFolder = response.data;\r\n                // console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n            });\r\n    }\r\n\r\n    await axios\r\n        .post(baseURL+'/listChildrenFolders', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'nextPageToken, files(id, name)',\r\n            spaces: 'drive',\r\n            pageToken: pageToken\r\n        })\r\n        .then((response) => {\r\n            queriedChildrenList = response.data;\r\n            // console.log('End getSubFolderChildrenList ' + queriedChildrenList.files[0].name)\r\n        });\r\n    \r\n    var latestFile = '';\r\n    var sortedChildrenList = queriedChildrenList.files.sort((a, b) => (a.name > b.name) ? 1 : -1);\r\n    // console.log(sortedChildrenList);\r\n    if (sortedChildrenList.length === 0) {\r\n        // console.log('No folders');\r\n        latestFile = '00';\r\n    } else {\r\n        latestFile = await sortedChildrenList[sortedChildrenList.length - 1].name.toString();\r\n    }\r\n    var date = await moment().format(\"DD MMMM YYYY\").toLocaleString();\r\n    var fileNumber = await Number(latestFile.substring(0, 2));\r\n    await fileNumber++;\r\n    if (fileNumber.toString().length === 1) {\r\n        fileNumber = await '0' + fileNumber;\r\n    }\r\n    var name = await fileNumber + ' - ' + date;\r\n    await axios\r\n        .post(baseURL+'/createFolder', {\r\n            name: name,\r\n            parents: [queriedSubFolder[0].id],\r\n            mimeType: 'application/vnd.google-apps.folder'\r\n        })\r\n        .then((response) => {\r\n            createdUploadFolder = response.data.id;\r\n            // console.log('End createFolder ' + createdUploadFolder)\r\n        });\r\n\r\n    for (var i = 0; i < fileArray.length; i++) {\r\n        const formData = new FormData();\r\n        await formData.append('file', fileArray[i]);\r\n        await formData.append('id', createdUploadFolder);\r\n\r\n        try {\r\n            await axios.post(baseURL + '/uploadFile', formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n            });\r\n        } catch (err) {\r\n            if (err.response.status === 500) {\r\n            // setMessage('There was a problem with the server');\r\n            } else {\r\n            // setMessage(err.response.data.msg);\r\n            }\r\n        }\r\n    }\r\n    return [createdUploadFolder, name];\r\n}\r\n\r\nexport async function savedIssuedDocIssuedAPI(queriedJobFolder, fileArray) {\r\n    var queriedSubFolder = null;\r\n    var queriedChildrenList = null;\r\n    var createdUploadFolder = null;\r\n    var pageToken = null;\r\n\r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='CAD' and '\" + queriedJobFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            queriedSubFolder = response.data;\r\n        //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n        });\r\n\r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='SY' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            queriedSubFolder = response.data;\r\n        //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n        });\r\n\r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='Issued' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            queriedSubFolder = response.data;\r\n        //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n        });\r\n\r\n    await axios\r\n        .post(baseURL+'/listChildrenFolders', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'nextPageToken, files(id, name)',\r\n            spaces: 'drive',\r\n            pageToken: pageToken\r\n        })\r\n        .then((response) => {\r\n            queriedChildrenList = response.data;\r\n            // console.log('End getSubFolderChildrenList ' + queriedChildrenList.files[0].name)\r\n        });\r\n    \r\n    var latestFile = '';\r\n    var sortedChildrenList = queriedChildrenList.files.sort((a, b) => (a.name > b.name) ? 1 : -1);\r\n    // console.log(sortedChildrenList);\r\n    if (sortedChildrenList.length === 0) {\r\n        // console.log('No folders');\r\n        latestFile = '00';\r\n    } else {\r\n        latestFile = await sortedChildrenList[sortedChildrenList.length - 1].name.toString();\r\n    }\r\n    var date = await moment().format(\"DD MMMM YYYY\").toLocaleString();\r\n    var fileNumber = await Number(latestFile.substring(0, 2));\r\n    await fileNumber++;\r\n    if (fileNumber.toString().length === 1) {\r\n        fileNumber = await '0' + fileNumber;\r\n    }\r\n    var name = await fileNumber + ' - ' + date;\r\n    await axios\r\n        .post(baseURL+'/createFolder', {\r\n            name: name,\r\n            parents: [queriedSubFolder[0].id],\r\n            mimeType: 'application/vnd.google-apps.folder'\r\n        })\r\n        .then((response) => {\r\n            createdUploadFolder = response.data.id;\r\n            // console.log('End createFolder ' + createdUploadFolder)\r\n        });\r\n\r\n    for (var i = 0; i < fileArray.length; i++) {\r\n        const formData = new FormData();\r\n        await formData.append('file', fileArray[i]);\r\n        await formData.append('id', createdUploadFolder);\r\n\r\n        try {\r\n            await axios.post(baseURL + '/uploadFile', formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n            });\r\n        } catch (err) {\r\n            if (err.response.status === 500) {\r\n            // setMessage('There was a problem with the server');\r\n            } else {\r\n            // setMessage(err.response.data.msg);\r\n            }\r\n        }\r\n    }\r\n    return [createdUploadFolder, name];\r\n}\r\n\r\nexport async function savedIssuedDocCurrentAPI(queriedJobFolder, fileArray) {\r\n    var queriedSubFolder = null;\r\n    var queriedChildrenList = null;\r\n    // var createdUploadFolder = null;\r\n    var pageToken = null;\r\n    var supersededFolder = null;\r\n\r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='CAD' and '\" + queriedJobFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            queriedSubFolder = response.data;\r\n        //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n        });\r\n\r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='SY' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            queriedSubFolder = response.data;\r\n        //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n        });\r\n\r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='Current PDF' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            queriedSubFolder = response.data;\r\n        //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n        });\r\n        \r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='SS' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            supersededFolder = response.data;\r\n            // console.log('End getSubFolderID ' + supersededFolder[0].id)\r\n        });\r\n\r\n    await axios\r\n        .post(baseURL+'/listChildrenFolders', {\r\n            q: \"'\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'nextPageToken, files(id, name)',\r\n            spaces: 'drive',\r\n            pageToken: pageToken\r\n        })\r\n        .then((response) => {\r\n            queriedChildrenList = response.data;\r\n            // console.log('End getSubFolderChildrenList ' + queriedChildrenList.files[0].name)\r\n        });\r\n    \r\n    var supersededFiles = [];\r\n    var outdatedFiles = [];\r\n    await queriedChildrenList.files.forEach(function (existingFile) {\r\n        for (var i = 0; i < fileArray.length; i++) {\r\n            var existing_revision_index = existingFile.name.lastIndexOf(\"_\");\r\n            if (existing_revision_index !== -1) {\r\n                var existing_base_name = existingFile.name.substr(0,existing_revision_index);\r\n                var new_revision_index = fileArray[i].name.lastIndexOf(\"_\");\r\n                if (new_revision_index !== -1) {\r\n                    var new_base_name = fileArray[i].name.substr(0,new_revision_index);\r\n                    if (existing_base_name === new_base_name) {\r\n                        var existing_revision = existingFile.name.substr(existing_revision_index + 1);\r\n                        var new_revision = fileArray[i].name.substr(new_revision_index + 1);\r\n                        var existing_decimal_index = existing_revision.lastIndexOf(\".\");\r\n                        var new_decimal_index = new_revision.lastIndexOf(\".\");\r\n                        existing_revision = existing_revision.substr(0,existing_decimal_index);\r\n                        new_revision = new_revision.substr(0,new_decimal_index);\r\n                        if (isNaN(new_revision) === false && isNaN(existing_revision) === false) {\r\n                            var existing_revision_number = Number(existing_revision);\r\n                            var new_revision_number = Number(new_revision);\r\n                            if (new_revision_number >= existing_revision_number) {\r\n                                supersededFiles.push(existingFile.id);\r\n                            } else {\r\n                                outdatedFiles.push(i);\r\n                            }\r\n                        } else if (isNaN(new_revision) === true && isNaN(existing_revision) === true) {\r\n                            var existing_revision_letter = Number(existing_revision.charCodeAt(0));\r\n                            var new_revision_letter = Number(new_revision.charCodeAt(0));\r\n                            if (new_revision_letter >= existing_revision_letter) {\r\n                                supersededFiles.push(existingFile.id);\r\n                            } else {\r\n                                outdatedFiles.push(i);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    for (var i = 0; i < supersededFiles.length; i++) {\r\n        const formData = new FormData();\r\n        await formData.append('fileId', supersededFiles[i]);\r\n        await formData.append('addParentId', supersededFolder[0].id);\r\n        await formData.append('removeParentId', queriedSubFolder[0].id);\r\n\r\n        try {\r\n            await axios.post(baseURL + '/moveFile', formData);\r\n        } catch (err) {\r\n            if (err.response.status === 500) {\r\n            // setMessage('There was a problem with the server');\r\n            } else {\r\n            // setMessage(err.response.data.msg);\r\n            }\r\n        }\r\n    }\r\n\r\n    for (var j = 0; j < fileArray.length; j++) {\r\n        if (!outdatedFiles.includes(j)) {\r\n            const formData = new FormData();\r\n            await formData.append('file', fileArray[j]);\r\n            await formData.append('id', queriedSubFolder[0].id);\r\n\r\n            try {\r\n                await axios.post(baseURL + '/uploadFile', formData, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data'\r\n                }\r\n                });\r\n            } catch (err) {\r\n                if (err.response.status === 500) {\r\n                // setMessage('There was a problem with the server');\r\n                } else {\r\n                // setMessage(err.response.data.msg);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport async function cleanXlsxAPI(queriedJobFolder, fileNameArray) {\r\n    var queriedSubFolder = null;\r\n    var queriedChildrenList = null;\r\n    // var createdUploadFolder = null;\r\n    var pageToken = null;\r\n    var supersededFolder = null;\r\n\r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='CAD' and '\" + queriedJobFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            queriedSubFolder = response.data;\r\n        //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n        });\r\n\r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='SY' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            queriedSubFolder = response.data;\r\n        //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n        });\r\n\r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='Current PDF' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            queriedSubFolder = response.data;\r\n        //   console.log('End getSubFolderID ' + queriedSubFolder[0].id)\r\n        });\r\n        \r\n    await axios\r\n        .post(baseURL+'/getFolder', {\r\n            q: \"mimeType='application/vnd.google-apps.folder' and name='SS' and '\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'files(name,id)'\r\n        })\r\n        .then((response) => {\r\n            supersededFolder = response.data;\r\n            // console.log('End getSubFolderID ' + supersededFolder[0].id)\r\n        });\r\n\r\n    await axios\r\n        .post(baseURL+'/listChildrenFolders', {\r\n            q: \"'\" + queriedSubFolder[0].id + \"' in parents\",\r\n            fields: 'nextPageToken, files(id, name)',\r\n            spaces: 'drive',\r\n            pageToken: pageToken\r\n        })\r\n        .then((response) => {\r\n            queriedChildrenList = response.data;\r\n            // console.log('End getSubFolderChildrenList ' + queriedChildrenList.files[0].name)\r\n        });\r\n    \r\n    var supersededFiles = [];\r\n    // var outdatedFiles = [];\r\n    await queriedChildrenList.files.forEach(function (existingFile) {\r\n        var existing_decimal_index = existingFile.name.lastIndexOf(\".\");\r\n        if (existing_decimal_index !== -1) {\r\n            var existingFileName = existingFile.name.substr(0,existing_decimal_index);\r\n            for (var i = 0; i < fileNameArray.length; i++) {\r\n                if (existingFileName === fileNameArray[i]) {\r\n                    break;\r\n                } else if (i === (fileNameArray.length-1)) {\r\n                    supersededFiles.push(existingFile.id);\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    for (var i = 0; i < supersededFiles.length; i++) {\r\n        const formData = new FormData();\r\n        await formData.append('fileId', supersededFiles[i]);\r\n        await formData.append('addParentId', supersededFolder[0].id);\r\n        await formData.append('removeParentId', queriedSubFolder[0].id);\r\n\r\n        try {\r\n            await axios.post(baseURL + '/moveFile', formData);\r\n        } catch (err) {\r\n            if (err.response.status === 500) {\r\n            // setMessage('There was a problem with the server');\r\n            } else {\r\n            // setMessage(err.response.data.msg);\r\n            }\r\n        }\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {Modal, Button, Form, Container} from 'react-bootstrap';\r\nimport axios from 'axios'\r\n\r\n\r\nexport class RemarkModal extends Component {\r\n\r\n    async handleSubmit(e, fileID, originalName) {\r\n        e.preventDefault();\r\n        if (e.target.Remark.value !== '') { \r\n            await this.renameID(fileID, originalName, e.target.Remark.value);\r\n        }\r\n        e.target.Remark.value = await null; // reset on submit\r\n    }\r\n    \r\n    renameID(fileID, originalName, remark) {\r\n        axios\r\n          .post('https://sy-custom-api-web-app.ts.r.appspot.com/renameID', {\r\n            name: originalName + \" - \" + remark,\r\n            fileId: fileID\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal {...this.props} backdrop='static' keyboard=\"false\">\r\n                <Modal.Header>\r\n                <Modal.Title>Add remark/description for uploaded files</Modal.Title>\r\n                </Modal.Header>\r\n                <Form onSubmit={(e) => { this.handleSubmit(e, this.props.remarkdata[0], this.props.remarkdata[1]) }}>\r\n                    <Modal.Body>\r\n                        <Container>\r\n                            <Form.Group className=\"mb-2\" id=\"job-number\">\r\n                                <Form.Label className=\"mb-0\">REMARK/DESCRIPTION</Form.Label>\r\n                                <Form.Control type=\"text\" name=\"Remark\" placeholder=\"Remark goes here\"/>\r\n                            </Form.Group>\r\n                        </Container>\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={this.props.onHide}>\r\n                        No Remark\r\n                    </Button>\r\n                    <Button variant=\"primary\" type=\"submit\" onClick={this.props.onHide}>\r\n                        Add Remark\r\n                    </Button>\r\n                    </Modal.Footer>\r\n                </Form>\r\n            </Modal>\r\n        );\r\n    }\r\n}","import React, { useRef, useState } from 'react'\r\nimport { Alert, Navbar, Container, Nav, Row, Col, Card, Form, Button } from 'react-bootstrap'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport { savedReceivedDocAPI, savedIssuedDocIssuedAPI, savedIssuedDocCurrentAPI, cleanXlsxAPI } from '../functions/HelperFunctions'\r\nimport { RemarkModal } from './RemarkModal'\r\nimport PuffLoader from \"react-spinners/PuffLoader\"\r\nimport * as XLSX from \"xlsx\"\r\n\r\nexport default function Dashboard() {\r\n  const baseURL = \"https://sy-custom-api-web-app.ts.r.appspot.com\";\r\n\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  const [error, setError] = useState(\"\")\r\n  const { currentUser, logout } = useAuth()\r\n  const history = useHistory()\r\n  \r\n  async function handleLogout() {\r\n    setError(\"\")\r\n\r\n    try {\r\n      await logout()\r\n      history.push(\"/login\")\r\n    } catch {\r\n      setError(\"Failed to log out\")\r\n    }\r\n  }\r\n\r\n  const saveReceivedDocInput = useRef(null)\r\n  const saveIssuedDocInput = useRef(null)\r\n  const readXlsxFile = useRef(null)\r\n\r\n  const [queriedJobFolder, setQueriedJobFolder] = useState(null);\r\n\r\n  function getJobID(name) {\r\n    axios\r\n      .post(baseURL+'/getFolder', {\r\n        q: \"mimeType='application/vnd.google-apps.folder' and name='\" + name + \"'\",\r\n        fields: 'files(name,id)'\r\n      })\r\n      .then((response) => {\r\n        const myQueriedJobFolder = response.data;\r\n        setQueriedJobFolder(myQueriedJobFolder);\r\n      });\r\n  }\r\n  \r\n  const [message, setMessage] = useState('')\r\n\r\n  const [fileUploadError, setFileUploadError] = useState('')\r\n  const [showFileUploadError, setShowFileUploadError] = useState(false)\r\n  const [showFileUploadSuccess, setShowFileUploadSuccess] = useState(false)\r\n\r\n  const [remarkData, setRemarkData] = useState('');\r\n\r\n  async function saveReceivedDoc(subFolder, fileArrayFunc) {\r\n    if (queriedJobFolder === null || queriedJobFolder.length === 0) {\r\n      setFileUploadError(\"No job selected. Please select a job before attempting to upload a file.\");\r\n      setShowFileUploadError(true);\r\n      return;\r\n    } else {\r\n      await setLoading(true);\r\n      await setRemarkData(await savedReceivedDocAPI(queriedJobFolder, subFolder, fileArrayFunc));\r\n      await handleShowRemarkModal();\r\n      \r\n      await setLoading(false);\r\n      await setShowFileUploadError(false);\r\n      await setMessage('Successfully uploaded ' + fileArrayFunc.length + ' files');\r\n      await setShowFileUploadSuccess(true);\r\n      \r\n    }\r\n  }\r\n\r\n  async function saveIssuedDoc(fileArrayFunc) {\r\n    if (queriedJobFolder === null || queriedJobFolder.length === 0) {\r\n      setFileUploadError(\"No job selected. Please select a job before attempting to upload a file.\");\r\n      setShowFileUploadError(true);\r\n      return;\r\n    } else {\r\n      await setLoading(true);\r\n      await setRemarkData(await savedIssuedDocIssuedAPI(queriedJobFolder, fileArrayFunc));\r\n      await savedIssuedDocCurrentAPI(queriedJobFolder, fileArrayFunc);\r\n      await handleShowRemarkModal();\r\n      \r\n      await setLoading(false);\r\n      await setShowFileUploadError(false);\r\n      // await setMessage('Successfully uploaded ' + fileArrayFunc.length + ' files');\r\n      // await setShowFileUploadSuccess(true);\r\n      \r\n    }\r\n  }\r\n\r\n  var xlsxItems = [];\r\n\r\n  async function cleanXlsx(xlsxFile, fileArrayFunc) {\r\n    if (queriedJobFolder === null || queriedJobFolder.length === 0) {\r\n      setFileUploadError(\"No job selected. Please select a job before attempting to upload a file.\");\r\n      setShowFileUploadError(true);\r\n      return;\r\n    } else {\r\n      await setLoading(true);\r\n      await readExcel(xlsxFile);\r\n      await cleanXlsxAPI(queriedJobFolder, await getFileList(xlsxItems));\r\n      \r\n      await setLoading(false);\r\n      await setShowFileUploadError(false);\r\n      await setMessage('Successfully uploaded ' + fileArrayFunc.length + ' files');\r\n      await setShowFileUploadSuccess(true);\r\n      \r\n    }\r\n  }\r\n\r\n  async function readExcel(file) {\r\n    const promise = new Promise(async (resolve, reject) => {\r\n      const fileReader = new FileReader();\r\n      fileReader.readAsArrayBuffer(file);\r\n\r\n      fileReader.onload = async (e) => {\r\n        const bufferArray = e.target.result;\r\n\r\n        const wb = XLSX.read(bufferArray, { type: \"buffer\" });\r\n\r\n        const wsname = wb.SheetNames[0];\r\n\r\n        const ws = wb.Sheets[wsname];\r\n\r\n        const data = XLSX.utils.sheet_to_json(ws);\r\n\r\n        resolve(data);\r\n      };\r\n\r\n      fileReader.onerror = (error) => {\r\n        reject(error);\r\n      };\r\n    });\r\n\r\n    await promise.then(async (d) => {\r\n      // console.log(d);\r\n      xlsxItems = d;\r\n    });\r\n  };\r\n\r\n  async function getFileList(sheetItems) {\r\n    var xlsxFileList = [];\r\n    for (var i = 0; i < sheetItems.length; i++) {\r\n      const objectArray = Object.values(sheetItems[i]);\r\n      var xlsxFileName = queriedJobFolder[0].name + \"_\" + objectArray[0] + \"_\" + objectArray[1] + \"_\" + objectArray[2];\r\n      // console.log(xlsxFileName);\r\n      xlsxFileList.push(xlsxFileName);\r\n    }\r\n    xlsxItems = [];\r\n    return xlsxFileList;\r\n  }\r\n  \r\n  const jobNumberRef = useRef()\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault()\r\n    \r\n    getJobID(jobNumberRef.current.value)\r\n  }\r\n\r\n  const [receivedSubFolder, setReceivedSubFolder] = useState('')\r\n\r\n  async function onChangeReceived(e) {\r\n    if (e.target.files[0] !== null) {\r\n      if (receivedSubFolder !== '') {\r\n        await saveReceivedDoc(receivedSubFolder, e.target.files);\r\n        setReceivedSubFolder('');\r\n      }\r\n    }\r\n    e.target.value = null; // reset onChange\r\n  };\r\n\r\n  var issuedFiles = null;\r\n\r\n  async function onChangeIssued(e) {\r\n    if (e.target.files[0] !== null) {\r\n      issuedFiles = await e.target.files;\r\n      e.target.value = await null;\r\n      await document.getElementById(\"liveReadXlsxFile\").click();\r\n      // await readXlsxFile.current.click();\r\n      // await saveIssuedDoc(e.target.files);\r\n    }\r\n    // e.target.value = null; // reset onChange\r\n  };\r\n  \r\n  async function onChangeXlsx(e) {\r\n    if (e.target.files[0] !== null) {\r\n      // await readExcel(e.target.files[0]);\r\n      // await getFileList(xlsxItems);\r\n      await saveIssuedDoc(issuedFiles);\r\n      await cleanXlsx(e.target.files[0], issuedFiles);\r\n    }\r\n    issuedFiles = await null;\r\n    e.target.value = null; // reset onChange\r\n  };\r\n\r\n  function onButtonClickReceived() {\r\n    saveReceivedDocInput.current.click();\r\n  };\r\n  \r\n  function onButtonClickIssued() {\r\n    saveIssuedDocInput.current.click();\r\n  }; \r\n  \r\n  function onButtonClickXlsx() {\r\n    readXlsxFile.current.click();\r\n  };\r\n  \r\n  const [showRemarkModal, setShowRemarkModal] = useState(false);\r\n  const handleCloseRemarkModal = () => setShowRemarkModal(false);\r\n  const handleShowRemarkModal = () => setShowRemarkModal(true);\r\n\r\n  return (\r\n    <>\r\n    <RemarkModal show={showRemarkModal} onHide={handleCloseRemarkModal} remarkdata={remarkData}/>\r\n      <Navbar className=\"\" style={{ minHeight: \"7vh\"}}>\r\n        <Container style={{ minWidth: \"97vw\" }}>\r\n          <Navbar.Brand>\r\n            <img\r\n            alt=\"\"\r\n            src=\"https://systructures.com.au/wp-content/uploads/2020/05/sy-logo.png\"\r\n            className=\"d-inline-block align-top\"\r\n          />{' '}\r\n          </Navbar.Brand>\r\n          <Nav className=\"mr-auto\">\r\n            <Nav.Link href=\"/update-profile\">Update Profile</Nav.Link>\r\n            <Nav.Link href=\"/signup\">Add New User</Nav.Link>\r\n            {/* <Nav.Link>Help</Nav.Link> */}\r\n            <Link style={{ backgroundColor: \"#666666\", color: \"#FFFFFF\" }} onClick={handleLogout} className=\"btn pull-right\">\r\n              Log Out\r\n            </Link>\r\n          </Nav>\r\n        </Container>\r\n      </Navbar>\r\n\r\n      <Alert show={showFileUploadSuccess} variant=\"success\" className=\"d-flex align-items-center justify-content-between flex-row\">\r\n        {message}\r\n        <Button onClick={() => setShowFileUploadSuccess(false)} variant=\"outline-success\">\r\n          Close\r\n        </Button>\r\n      </Alert>\r\n      <Alert show={showFileUploadError} variant=\"danger\" className=\"d-flex align-items-center justify-content-between flex-row\">\r\n        {fileUploadError}\r\n        <Button onClick={() => setShowFileUploadError(false)} variant=\"outline-danger\">\r\n          Close\r\n        </Button>\r\n      </Alert>\r\n      {\r\n        loading ?\r\n        \r\n        <div style = {{ height:\"93vh\", width:\"100%\", display:\"flex\", justifyContent:\"center\", alignItems:\"center\", flexDirection:\"column\" }}>\r\n          <PuffLoader color={'#8B0000'} loading={loading} size={150}/>\r\n          <h5 className=\"mt-4\">Files are being uploaded - this process may take a while</h5>\r\n          <h5>Please do not close tab or browser</h5>\r\n        </div>\r\n        \r\n        :\r\n\r\n        <Container fluid>\r\n        <Row style={{ height: \"25vh\" }} className=\"mb-4\">\r\n          <Col xs={3} className=\"d-flex align-items-start justify-content-center mt-2\">\r\n            <Card style={{ minHeight: \"90%\", borderRadius: \"20px\", backgroundColor: \"#810B0A\", borderColor: \"lightgray\" }} className=\"w-75 m-2\">\r\n              <Container style={{ color: \"#FFF\" }} className=\"mt-3 text-center border-bottom\">\r\n                <h4>CREATE NEW JOB</h4>\r\n              </Container>\r\n              <Card.Body style={{ backgroundColor: \"white\", borderBottomLeftRadius: \"18px\", borderBottomRightRadius: \"18px\" }} className=\"d-flex align-items-center justify-content-center\">\r\n                <Button className=\"w-50\" variant=\"outline-dark\" type=\"submit\" disabled>CREATE</Button>\r\n              </Card.Body>\r\n            </Card>\r\n          </Col>\r\n          <Col xs={6} className=\"align-middle mt-2\">\r\n            <Card style={{ minHeight: \"90%\", borderRadius: \"20px\", backgroundColor: \"#810B0A\", borderColor: \"lightgray\" }} className=\"m-2\">\r\n              <Container style={{ color: \"#FFF\" }} className=\"mt-3 text-center border-bottom\">\r\n                <h4>SELECT JOB</h4>\r\n              </Container>\r\n              <Card.Body style={{ backgroundColor: \"white\", borderBottomLeftRadius: \"18px\", borderBottomRightRadius: \"18px\" }}>\r\n                <Form className=\"d-flex align-items-center justify-content-center flex-row\" onSubmit={handleSubmit}>\r\n                  <Container>\r\n                    <Form.Group id=\"job-number\">\r\n                        <Form.Label className=\"mb-0\">JOB NUMBER</Form.Label>\r\n                        <Form.Control type=\"text\" placeholder=\"Enter Job #\" ref={jobNumberRef} required />\r\n                    </Form.Group>\r\n                    {/* <Form.Group id=\"job-name\">\r\n                        <Form.Label className=\"mb-0\">JOB NAME</Form.Label>\r\n                        <Form.Control type=\"text\" />\r\n                    </Form.Group> */}\r\n                    <Button className=\"w-100 mt-3 mb-2\" variant=\"outline-dark\" type=\"submit\">SELECT</Button>\r\n                  </Container>\r\n                  <Container className=\"text-center\">\r\n                    <div>CURRENT JOB</div> {queriedJobFolder === null || queriedJobFolder.length === 0 ? 'No Job Selected' : queriedJobFolder[0].name}\r\n                  </Container>\r\n                </Form>\r\n              </Card.Body>\r\n              {error && <Alert variant=\"danger\">{error}</Alert>}\r\n            </Card>\r\n          </Col>\r\n          <Col className=\"d-flex align-items-center flex-column justify-content-evenly\">\r\n\r\n            <input type='file' onChange={onChangeIssued} ref={saveIssuedDocInput} style={{display: 'none'}} accept=\".pdf\" multiple/>\r\n            <Button className=\"w-50\" variant=\"outline-dark\" onClick={() => {onButtonClickIssued()}}>ISSUE SY DOCUMENT/S</Button>\r\n\r\n            <input type='file' onChange={onChangeXlsx} ref={readXlsxFile} style={{display: 'none'}} accept=\".xlsx, .xls, .csv\" id=\"liveReadXlsxFile\"/>\r\n            <Button className=\"w-50\" variant=\"outline-dark\" onClick={() => {onButtonClickXlsx()}} style={{display: 'none'}}>CLEAN CURRENT PDF (EXCEL)</Button>\r\n\r\n          </Col>\r\n        </Row>\r\n        <Row style={{ height: \"34vh\" }}>\r\n          <Col>\r\n            <Container className=\"text-center\" style={{ height: \"10%\" }}>\r\n              <h5>SAVE RECEIVED DOCUMENTS</h5>\r\n            </Container>\r\n            <Container className=\"d-flex align-items-center flex-column justify-content-evenly\"  style={{ height: \"80% \" }}>\r\n              \r\n              <input type='file' onChange={onChangeReceived} ref={saveReceivedDocInput} style={{display: 'none'}} multiple/>\r\n\r\n              <Button className=\"w-100\" variant=\"outline-dark\" onClick={() => {setReceivedSubFolder('CAD'); onButtonClickReceived()}}>CAD</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" onClick={() => {setReceivedSubFolder('Photos'); onButtonClickReceived()}}>PHOTOS</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" onClick={() => {setReceivedSubFolder('Shop Drawings'); onButtonClickReceived()}}>SHOP DRAWINGS</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" onClick={() => {setReceivedSubFolder('Geotechnical'); onButtonClickReceived()}}>GEOTECHNICAL</Button>\r\n\r\n            </Container>\r\n          </Col>\r\n          <Col>\r\n            <Container className=\"text-center\" style={{ height: \"10%\"}}>\r\n              <h5>ADMIN DOCUMENTS</h5>\r\n            </Container>\r\n            <Container className=\"d-flex align-items-center flex-column justify-content-evenly\"  style={{ height: \"80% \" }}>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>FEE PROPOSAL</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>FEE VARIATION</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>LETTER</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>REPORT</Button>\r\n            </Container>\r\n          </Col>\r\n          <Col>\r\n            <Container className=\"text-center\" style={{ height: \"10%\" }}>\r\n                <h5>CONCEPT</h5>\r\n              </Container>\r\n              <Container className=\"d-flex align-items-center flex-column justify-content-evenly\"  style={{ height: \"80% \" }}>\r\n                <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>DESIGN BREIF</Button>\r\n                <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>GEOTECH FEE REQUEST</Button>\r\n                <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>CONCEPT DESIGN CHECKLIST</Button>\r\n              </Container>\r\n          </Col>\r\n          <Col>\r\n            <Container className=\"text-center\" style={{ height: \"10%\" }}>\r\n              <h5>DESIGN & DOCUMENTATION</h5>\r\n            </Container>\r\n            <Container className=\"d-flex align-items-center flex-column justify-content-evenly\"  style={{ height: \"80% \" }}>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>SAFETY IN DESIGN REPORT</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>STRUCTURAL SPECIFICATIONS</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>CALCULATION DOCUMENT</Button>\r\n            </Container>\r\n          </Col>\r\n        </Row>\r\n        <Row style={{ height: \"34vh\" }}>\r\n          <Col>\r\n            <Container className=\"text-center\" style={{ height: \"10%\" }}>\r\n              <h5>CONSTRUCTION</h5>\r\n            </Container>\r\n            <Container className=\"d-flex align-items-center flex-column justify-content-evenly\"  style={{ height: \"80% \" }}>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>SITE INSPECTION REPORT</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>LETTER OF COMPLIANCE</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>SHOP DRAWING REVIEW</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>CERTIFICATION LETTER</Button>\r\n            </Container>\r\n          </Col>\r\n          <Col>\r\n            <Container className=\"text-center\" style={{ height: \"10%\" }}>\r\n              <h5>QA</h5>\r\n            </Container>\r\n            <Container className=\"d-flex align-items-center flex-column justify-content-evenly\"  style={{ height: \"80% \" }}>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>VERIFY ENGINEERING CHECKLIST</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>VERIFY BIM CHECKLIST</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>VERIFY DRAWING REVIEW</Button>\r\n              <Button className=\"w-100\" variant=\"outline-dark\" type=\"submit\" disabled>VERIFY SAFETY IN DESIGN</Button>\r\n            </Container>\r\n          </Col>\r\n          <Col></Col>\r\n          <Col></Col>\r\n        </Row>\r\n        {/* <div className=\"w100\" style={{ maxWidth: \"400px\" }}>\r\n          <Card>\r\n            <Card.Body>\r\n              <h2 className=\"text-center mb-4\">Profile</h2>\r\n              {error && <Alert variant=\"danger\">{error}</Alert>}\r\n              <strong>Email:</strong> {currentUser.email}\r\n              <Link to=\"/update-profile\" className=\"btn btn-primary w-100 mt-3\">\r\n                Update Profile\r\n              </Link>\r\n            </Card.Body>\r\n          </Card>\r\n          <div className=\"w-100 text-center mt-2\">\r\n            <Button variant=\"link\" onClick={handleLogout}>\r\n              Log Out\r\n            </Button>\r\n          </div>\r\n        </div> */}\r\n      </Container>\r\n      }\r\n    </>\r\n  )\r\n}","import React, { useRef, useState } from 'react'\r\nimport { Card, Form, Button, Alert, Container } from 'react-bootstrap'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { Link, useHistory } from 'react-router-dom'\r\n\r\nexport default function Login() {\r\n    const emailRef = useRef()\r\n    const passwordRef = useRef()\r\n    const { login } = useAuth()\r\n    const [error, setError] = useState('')\r\n    const [loading, setLoading] = useState(false)\r\n    const history = useHistory()\r\n\r\n    async function handleSubmit(e) {\r\n        e.preventDefault()\r\n\r\n        try {\r\n            setError('')\r\n            setLoading(true)\r\n            await login(emailRef.current.value, passwordRef.current.value)\r\n            history.push('/')\r\n        } catch {\r\n            setError('Failed to log in')\r\n        }\r\n\r\n        setLoading(false)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Container className=\"d-flex align-items-center justify-content-center\" style={{ minHeight: \"100vh\" }}>\r\n                <div className=\"w100\" style={{ maxWidth: \"400px\" }}>\r\n                    <Card>\r\n                        <Card.Body>\r\n                            <h2 className=\"text-center mb-4\">Log In</h2>\r\n                            {error && <Alert variant=\"danger\">{error}</Alert>}\r\n                            <Form onSubmit={handleSubmit}>\r\n                                <Form.Group id=\"email\">\r\n                                    <Form.Label>Email</Form.Label>\r\n                                    <Form.Control type=\"email\" ref={emailRef} required />\r\n                                </Form.Group>\r\n                                <Form.Group id=\"password\">\r\n                                    <Form.Label>Password</Form.Label>\r\n                                    <Form.Control type=\"password\" ref={passwordRef} required />\r\n                                </Form.Group>\r\n                                <Button disabled={loading} className=\"w-100 mt-4\" type=\"submit\">Log In</Button>\r\n                            </Form>\r\n                            <div className=\"w-100 text-center mt-3\">\r\n                                <Link to=\"/forgot-password\">Forgot Password?</Link>\r\n                            </div>\r\n                        </Card.Body>\r\n                    </Card>\r\n                    {/* <div className=\"w-100 text-center mt-2\">\r\n                        Need an account? <Link to=\"/signup\">Sign Up</Link>\r\n                    </div> */}\r\n                </div>\r\n            </Container>\r\n        </>\r\n    )\r\n}","import React from 'react'\r\nimport { Redirect, Route } from 'react-router-dom'\r\nimport { useAuth } from '../contexts/AuthContext'\r\n\r\nexport default function PrivateRoute({ component: Component, ...rest }) {\r\n    const { currentUser } = useAuth()\r\n\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={props => {\r\n                return currentUser ? <Component {...props } /> : <Redirect to=\"/login\" />\r\n            }}\r\n        >\r\n        </Route>\r\n    )\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { Card, Form, Button, Alert, Container } from 'react-bootstrap'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function ForgotPassword() {\r\n    const emailRef = useRef()\r\n    const { resetPassword } = useAuth()\r\n    const [error, setError] = useState('')\r\n    const [message, setMessage] = useState('')\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    async function handleSubmit(e) {\r\n        e.preventDefault()\r\n\r\n        try {\r\n            setMessage('')\r\n            setError('')\r\n            setLoading(true)\r\n            await resetPassword(emailRef.current.value)\r\n            setMessage('Check your inbox for further instructions')\r\n        } catch {\r\n            setError('Failed to reset password')\r\n        }\r\n\r\n        setLoading(false)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Container className=\"d-flex align-items-center justify-content-center\" style={{ minHeight: \"100vh\" }}>\r\n                <div className=\"w100\" style={{ maxWidth: \"400px\" }}>\r\n                    <Card>\r\n                        <Card.Body>\r\n                            <h2 className=\"text-center mb-4\">Password Reset</h2>\r\n                            {error && <Alert variant=\"danger\">{error}</Alert>}\r\n                            {message && <Alert variant=\"success\">{message}</Alert>}\r\n                            <Form onSubmit={handleSubmit}>\r\n                                <Form.Group id=\"email\">\r\n                                    <Form.Label>Email</Form.Label>\r\n                                    <Form.Control type=\"email\" ref={emailRef} required />\r\n                                </Form.Group>\r\n                                <Button disabled={loading} className=\"w-100 mt-4\" type=\"submit\">Reset Password</Button>\r\n                            </Form>\r\n                            <div className=\"w-100 text-center mt-3\">\r\n                                <Link to=\"/login\">Login</Link>\r\n                            </div>\r\n                        </Card.Body>\r\n                    </Card>\r\n                    <div className=\"w-100 text-center mt-2\">\r\n                        Need an account? <Link to=\"/signup\">Sign Up</Link>\r\n                    </div>\r\n                </div>\r\n            </Container>\r\n        </>\r\n    )\r\n}","import React, { useRef, useState } from 'react'\r\nimport { Card, Form, Button, Alert, Container } from 'react-bootstrap'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { Link, useHistory } from 'react-router-dom'\r\n\r\nexport default function UpdateProfile() {\r\n    const emailRef = useRef()\r\n    const passwordRef = useRef()\r\n    const passwordConfirmRef = useRef()\r\n    const { currentUser, updateEmail, updatePassword } = useAuth()\r\n    const [error, setError] = useState('')\r\n    const [loading, setLoading] = useState(false)\r\n    const history = useHistory()\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault()\r\n\r\n        if (passwordRef.current.value !== passwordConfirmRef.current.value) {\r\n            return setError('Passwords do not match')\r\n        }\r\n\r\n        const promises = []\r\n\r\n        setError('')\r\n        setLoading(true)\r\n\r\n        if (emailRef.current.value !== currentUser.email) {\r\n            promises.push(updateEmail(emailRef.current.value))\r\n        }\r\n\r\n        if (passwordRef.current.value) {\r\n            promises.push(updatePassword(passwordRef.current.value))\r\n        }\r\n\r\n        Promise.all(promises).then(() => {\r\n            history.push('/')\r\n        }).catch(() => {\r\n            setError('Failed to update account')\r\n        }).finally(() => {\r\n            setLoading(false)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Container className=\"d-flex align-items-center justify-content-center\" style={{ minHeight: \"100vh\" }}>\r\n                <div className=\"w100\" style={{ maxWidth: \"400px\" }}>\r\n                    <Card>\r\n                        <Card.Body>\r\n                            <h2 className=\"text-center mb-4\">Update Profile</h2>\r\n                            {error && <Alert variant=\"danger\">{error}</Alert>}\r\n                            <Form onSubmit={handleSubmit}>\r\n                                <Form.Group id=\"email\">\r\n                                    <Form.Label>Email</Form.Label>\r\n                                    <Form.Control type=\"email\" ref={emailRef} required defaultValue={currentUser.email} />\r\n                                </Form.Group>\r\n                                <Form.Group id=\"password\">\r\n                                    <Form.Label>Password</Form.Label>\r\n                                    <Form.Control type=\"password\" ref={passwordRef} placeholder=\"Leave blank to keep the same\" />\r\n                                </Form.Group>\r\n                                <Form.Group id=\"password-confirm\">\r\n                                    <Form.Label>Password Confirmation</Form.Label>\r\n                                    <Form.Control type=\"password\" ref={passwordConfirmRef} placeholder=\"Leave blank to keep the same\" />\r\n                                </Form.Group>\r\n                                <Button disabled={loading} className=\"w-100 mt-4\" type=\"submit\">Update</Button>\r\n                            </Form>\r\n                        </Card.Body>\r\n                    </Card>\r\n                    <div className=\"w-100 text-center mt-2\">\r\n                        <Link to=\"/\">Cancel</Link>\r\n                    </div>\r\n                </div>\r\n            </Container>\r\n        </>\r\n    )\r\n}","import React from 'react'\r\nimport Signup from './Signup'\r\nimport { AuthProvider } from '../contexts/AuthContext'\r\nimport { BrowserRouter as Router, Switch, Route} from 'react-router-dom'\r\nimport Dashboard from './Dashboard'\r\nimport Login from './Login'\r\nimport PrivateRoute from './PrivateRoute'\r\nimport ForgotPassword from './ForgotPassword'\r\nimport UpdateProfile from './UpdateProfile'\r\n\r\nfunction App() {\r\n  return (\r\n      <div>\r\n        <Router>\r\n          <AuthProvider>\r\n            <Switch>\r\n              <PrivateRoute exact path=\"/\" component={Dashboard}/>\r\n              <PrivateRoute path=\"/update-profile\" component={UpdateProfile}/>\r\n              <PrivateRoute path=\"/signup\" component={Signup} />\r\n              <Route path=\"/login\" component={Login} />\r\n              <Route path=\"/forgot-password\" component={ForgotPassword} />\r\n            </Switch>\r\n          </AuthProvider>\r\n        </Router>\r\n      </div>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/App';\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\n\r\nReactDOM.render(\r\n  // <React.StrictMode>\r\n    <App />\r\n  // </React.StrictMode>\r\n  ,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}